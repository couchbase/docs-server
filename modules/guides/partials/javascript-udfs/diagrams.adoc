// tag::multiple-references-to-udf[]
.References to a UDF
[plantuml#multiple-references-to-udf]
....
@startuml

package "my-library" {
  [getBusinessDays(startDate,endDate)] as jsGBDFunction
  [add(x,y)]
  
}

[N1QL function: GetBusinessDays('02 January 2022',\n '31 January 2023')] --> jsGBDFunction : references
[N1QL function: GetWeekDays('02/14/2022', '4/16/2022')] --> jsGBDFunction : references

@enduml
....
// end::multiple-references-to-udf[]

// tag::javascript-scopes[]
.Javascript UDFs Structure
[plantuml#javascript-scopes]
....
@startuml

skinparam componentStyle rectangle
left to right direction
database "Bucket" #White {

  node "Scope" #White{
  
        file "my-library" #White {
        
           component function1 #Ivory [
                
function add(x, y) {
    ...       
}

           ]
           
           component function2 #Ivory [
           
function getBusinessDays(startDate, endDate) {

  ...

}     
           
           ]
        
        }
  
}

@enduml
....
// end::javascript-scopes[]

//tag::javascript-udf-library-creation-sequence[]
.Sequence for Creating a JavaScript UDF Library
[plantuml#create-library-udf-sequence]
....
@startuml
skinparam ComponentStyle rectangle
skinparam ActorStyle awesome

left to right direction

actor "developer" as user

note top of cAndA #Ivory
  The library and the first function
  are usually added in the same step.
end note

note right of cAndA #Ivory
  The library can be created as globally accessible
  across the cluster, or it can be set to be accessible
  by users with access to a bucket/scope.
end note

frame "Create library and add first function" as cAndA {
  [Create library]  --> [Add function]
}

user --> [Create library]
[Add function] --> [Create N1QL User-Defined Function]
[Create N1QL User-Defined Function] -->() end

note top of [Add function] #Ivory
  The developer can add one or more
  functions to the library 
end note
@enduml
....
//end::javascript-udf-library-creation-sequence[]

