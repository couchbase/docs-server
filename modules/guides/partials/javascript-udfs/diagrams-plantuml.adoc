//tag::javascript-udf-multiple-references[]
[plantuml, subs="attributes"]
....
@startuml

package "My Javascript Library" {
  [Javascript function: add(x,y)] as jsFunction
}

[{sqlpp} function: MyAdd(2,2)] --> jsFunction : references
[{sqlpp} function: AnotherAdd(10, 12)] --> jsFunction : references

@enduml
....
//end::javascript-udf-multiple-references[]


//tag::javascript-udf-inline-call-sequence[]
[plantuml, subs="attributes"]
....
@startuml

 actor Dev
 participant JSEngine
 participant QueryEngine
 database Bucket
 
 Dev ->> JSEngine: JS: var q = select …
 activate JSEngine
 JSEngine ->> QueryEngine : N1QL(…) call
 activate QueryEngine
 QueryEngine ->> JSEngine  : return query
 deactivate QueryEngine
 JSEngine ->> Dev : return q
 deactivate JSEngine

    loop Every document in q
      Dev ->> JSEngine   : operate on document
      JSEngine ->> QueryEngine ++ : get document
      QueryEngine ->> Bucket ++ : get document
      Bucket ->> QueryEngine -- : retrieved document
      QueryEngine ->> JSEngine -- : retrieved document
    end
@enduml
....
//end::javascript-udf-inline-call-sequence[]

//tag::javascript-udf-data-transformation[]
[plantuml, subs="attributes"]
....
@startuml

skinparam componentStyle rectangle

left to right direction

[Run {sqlpp} statement] --> [Transform JSON data] : {item1, item2, item3}
[Transform JSON data] -->  return  : {item1, item3}

@enduml
....
//end::javascript-udf-data-transformation[]
