= Creating a JavaScript Library
:description: Creating a JavaScript library.
:page-pagination: 
:page-edition: Enterprise Edition
:page-topic-type: guide
:page-toclevels: 2

== Introduction

In this guide you will learn how to create a library for storing JavaScript functions, and how to add a new function to the library.

include::partial$before-you-begin.adoc[]

include::partial$query-tools.adoc[]

== Creating the JavaScript Function

You can use the Query Workbench UI or the REST API to create a scoped library.

NOTE: You cannot create a JavaScript library using the CBQ Shell.

[tabs] 
====
Query Workbench::
+
--
. Select btn:[Query] to access the Query Workbench, then select btn:[UDF] Query Workbench menu.
+
image::javascript-udfs/navigate-to-udf-query.png[alt="route to the user-defined functions screen"]

. Click on the *{plus} add function library* link in the `Javascript Function Libraries` table to show the `Add Library` screen.

. Select your `Namespace` from the drop-down lists.
+
image::javascript-udfs/add-scoped-library.png[,500]
+
NOTE: The `Namespace` is made up of the bucket name and the scope.
You have the option to leave this set for the `global` scope.

. Enter a name for the library in the `Library Name` field.
. Add your own function to the library. 
. Save the library by pressing the btn:[Save] button.
--

REST API::
+
--
. Start a shell session.
. Run a `curl` command to create a JavaScript library within a desired scope.

[source, console]
----
include::example$javascript-udfs/create-scoped-javascript-function-with-rest.sh[]
----
The parameters in the URL denote that the function should reside in the `travel-sample` bucket and under the `inventory` scope within that bucket.
--
====

== Creating the Reference Function

The calling reference function must be defined with access to the underlying JavaScript function.

[tabs]
====
Query Workbench::
+
--
. Access the `UDF` screen from the administration console.
+
image::javascript-udfs/navigate-to-udf-query.png[]

. Click on the `{plus}{nbsp}add function` link from the `UDFs` screen.
+
image::javascript-udfs/my-library-list-add-function-button.png[alt="library list"]
+
which will display the `Add Function` screen.
+
image::javascript-udfs/add-function-dialog.png[ ,400]

. Use the `Namespace` drop-down lists to select the bucket and scope where your Javascript function resides.

. Fill in the `Function Name` of your referencing function.

. Leave the `Parameters` as they are.
+
NOTE: The `...` in the parameters box denotes a variable length list of parameters.
This is why you don't have to fill in this field.

. Select `Javascript` for the function type.
A field will appear in the dialog with a list of available libraries in the namespace you selected.
+
image::javascript-udfs/add-function-dialog-switch-to-javascript.png[]
+
From this list select the library containing your function. 

. Enter the name of the JavaScript function in the `Library Function Name` field.
--

REST API::
+
--
Run a `curl` command from the shell to add a reference function that calls your Javascript function.

[source, console]
----
include::example$javascript-udfs/create-scoped-n1ql-reference-function-with-rest.sh[]
----
--

CBQ Shell::
+
--
Execute the `CREATE FUNCTION` in the CBQ Shell to create the reference function:

[source, n1ql]
----
include::example$javascript-udfs/create-scoped-reference-function.n1ql[]
----
--
====



