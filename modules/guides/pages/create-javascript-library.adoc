= Creating a JavaScript Library
:description: Creating a JavaScript library.
:page-pagination: 
:page-edition: Enterprise Edition
:page-topic-type: guide
:page-toclevels: 2

== Introduction

In this guide you will learn how to create a library for storing JavaScript functions, and how to add a new function to the library.

include::partial$before-you-begin.adoc[tag=body]
include::partial$query-tools.adoc[tags=body;!thumbs]

[#creating-the-library-and-adding-your-first-function]
== Creating the Library and Adding Your First Function

You can use the Query Workbench UI or the REST API to create a scoped library.
The process for creating the library is as follows:

include::partial$javascript-udfs/diagrams.adoc[tags=javascript-udf-library-creation-sequence]

*(1) Create library*:: Create the library by creating the logical storage for the library.

*(2) Add the JavaScript function to the library*:: Edit the library to add your JavaScript function.

*(3) Create N1QL User-Defined Function*:: The N1QL User-Defined Function registers the JavaScript function with the cluster so that it can be called as part of N1QL statements (such as `SELECT` and `EXECUTE FUNCTION`). 
Executing UDFs is covered in xref:call-user-defined-function.adoc[]

As shown in xref:create-library-udf-sequence[xrefstyle=short], the library is created and the first function is added in the same step.
This is the same for both the Query Workbench and the REST API.

NOTE: You cannot create a JavaScript library using N1QL.

[tabs] 
====
Query Workbench::
+
--
. Select btn:[Query] to access the Query Workbench, then select btn:[UDF] Query Workbench menu.
+
image::javascript-udfs/navigate-to-udf-query.png[alt="route to the user-defined functions screen"]

. Click on the *{plus} add function library* link in the `Javascript Function Libraries` table to show the `Add Library` screen.

. Select your `Namespace` from the drop-down lists.
In this example, the namespace has been set to the `inventory` scope inside the `travel-sample` bucket. 
You also have the option of leaving the Namespace unset, which will place the library in the global bucket-level scope.
+
image::javascript-udfs/add-scoped-library.png[,500]
+
.A Note on Namespaces
[sidebar]
****
The `Namespace` defines the `scope` of the library within the containing bucket.
(You can read about scopes in the xref:javascript-udfs.adoc#libraries-and-scopes[Introduction]).
Setting the namespace means that functions in the library can only be called users who have their context set to the same scope.
****

. Enter a name for the library in the `Library Name` field.

. Add your own function to the library, for example:
+
[source, javascript]
----
include::example$javascript-udfs/get-business-days.js[]
----
. Save the library by pressing the btn:[Save] button.
+
TIP: You can, of course, create an empty library and add functions to it later.
--


REST API::
+
--
. Start a shell session.
. Run a `curl` command to create a JavaScript library within a desired scope.
+
[source, console]
----
include::example$javascript-udfs/create-scoped-javascript-function-with-rest.sh[]
----
The parameters in the URL denote that the function should reside in the `travel-sample` bucket and under the `inventory` scope within that bucket.
--
====

== Further Reading

include::partial$javascript-udfs/further-reading.adoc[tags="user-defined-functions-ui;rest-create-library-call"]

