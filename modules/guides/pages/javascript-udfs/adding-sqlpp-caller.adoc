= Adding the {sqlpp} Caller Function
:description: Creating an {sqlpp} definition for the Javascript function.
:page-pagination: 
:page-topic-type: guide
:page-toclevels: 2

[.edition]#{enterprise}#
[abstract]
{description}

== Introduction

A Javascript function cannot be called directly in an {sqlpp} statement. 
It has to be exposed to Couchbase by calling it through a proxy function.

include::partial$diagrams/javascript-udf-diagrams.adoc[tags="javascript-udf-call-sequence"]

This section will demonstrate how to:
 
 * Create the extension function for calling our Javascript routine.
 * Create an {sqlpp} statement to call the Javascript routine.
 
== Add the {sqlpp} Caller Function
 
The easiest way to add the {sqlpp} caller function is through the Query Workbench.

Access the `User-Defined Functions` screen from the Administrator's console. 
(There is a description of how to do this is in the xref:javascript-udfs/creating-a-javascript-udf.adoc#introduction-create-javascript-library[Introduction]).

Click on the btn:[{plus} add function] link.

image::javascript-udfs/my-library-list.png[]

You will be shown a dialog which you will use to enter details of the calling function. 

image::javascript-udfs/add-function-dialog.png[ ,400]

The first thing to do is instruct the dialog that you wish to create a `Javascript` function, rather than an `inline` function, so change the `Function Type` to `Javascript`.

image::javascript-udfs/add-javascript-function-dialog.png[ ,400]

You can now fill in the details as follows:
{empty} +

*Function Name*:: This is the name of the function that will be used in {sqlpp} statements.
In this example, we're going to label this function as `MyAdd`.

*Namespace*:: The function can be allocated a namespace that is local to a bucket, or it can be set to the `global` namespace which means any bucket can access it.
Set this value to `global`.

*Parameters*:: Any parameters that are used in the Javascript function must also be declared here.
The javascript function `add(a,b)` takes two parameters. So create the two parameters here.
+
NOTE: The parameters act as placeholders, so they don't need to share the same names as the underlying Javascript function.

*Function Type*:: This should already be set to `javascript`. 

*Javascript Library*:: This of name of the Javascript library where your function is stored. This should be set to `my-library`.

*Library Function Name*:: The name of the Javascript function in `my-library` that this definition will call. In this case, the function is simply called `add`.

image::javascript-udfs/add-javascript-function-filled-dialog.png[ ,400]

Now press the btn:[Save Function] button to save the definition.

NOTE: In the background, The dialog will use the gathered information to generate an {sqlpp} xref:n1ql:n1ql-language-reference/createfunction.adoc[`CREATE FUNCTION`] call to generate the function definition.

The new definition should now appear in the library list.

image::javascript-udfs/library-list-with-sqlpp-caller.png[]



