= Manage Statistics

[abstract]
Statistics on Couchbase Server can be monitored, per bucket, per node, and per cluster.

[#statistics-management-overview]
== Statistics Management

Couchbase Server provides statistics, which show the performance of the cluster to Full and Cluster administrators.
Statistics are constantly updated, and can be monitored by means of xref:manage:manage-statistics/manage-statistics.adoc#manage-statistics-with-the-ui[Couchbase Web Console], the Couchbase xref:manage:manage-statistics/manage-statistics.adoc#manage-statistics-with-the-cli[CLI], and the xref:manage:manage-statistics/manage-statistics.adoc#manage-statistics-with-the-rest-api[REST API].

[#manage-statistics-with-the-ui]
== Manage Statistics with the UI

Couchbase Server allows statistics to be monitored on the *Dashboard* of Couchbase Web Console.
Open Couchbase Web Console.
The *Dashboard* should be visible by default.
If it is not visible, display it by left-clicking on the *Dashboard* tab, in the left-hand navigation bar:

[#access-dashboard]
image::manage-statistics/DBaccessDB.png[,100,align=left]

Initially, prior to any definitions, the *Dashboard* appears as follows:

[#dashboard-initial-appearance]
image::manage-statistics/DBblankInitial.png[,700,align=left]

At the foot of the screen, the numbers of cluster-nodes that are _active_, _failed-over_, _pending rebalance_, and _inactive_ are listed.
Near the top, a notification is provided, regarding _buckets_:

[#dashboard-add-bucket-notification]
image::manage-statistics/DBaddBucketInstruction.png[,480,align=left]

Couchbase Web Console organizes statistics by _bucket_.
Therefore, until a bucket is added to the cluster, no statistics can be shown.
To add a bucket, left-click on one of the options provided by the notification.
Either left-click on xref:manage:manage-buckets/create-bucket.adoc[Buckets], to add a custom bucket; or, left-click on xref:manage:manage-settings/install-sample-buckets.adoc[sample bucket] to install a sample bucket.

The following examples assume that the `travel-sample` bucket has been added.
This is indicated by the control at the right-hand side of the screen:

[#dashboard-travel-sample-added]
image::manage-statistics/DBtravelSampleAdded.png[,120,align=left]

[#add-a-group]
=== Add a Group

In the context of statistics-display, a _group_ consists of a number of different animated charts, which are associated with one another for purposes of display.
Once a group is defined, individual charts can be added incrementally.
Ideally, information-content of charts within a group should be related, in some significant way.
The charts within a group can then be displayed and hidden as a single unit: this optimizes use of screen real estate, when multiple groups have been defined.

To define a group, access the *Add Group* control, in the upper part of the screen:

[#access-add-group-control]
image::manage-statistics/DBclickToAddGroupOne.png[,260,align=left]

Left-clicking on the control at the right-hand side displays a pull-down dialog:

[#access-add-group-dialog-one]
image::manage-statistics/DBclickToAddGroupTwo.png[,260,align=left]

Left-click in the `new scenario...` editable text-field.
This causes the pull-down dialog to expand further:

[#access-add-group-dialog-two-point-five]
image::manage-statistics/DBclickToAddGroupTwoPointFive.png[,260,align=left]

In the `new scenario...` field, type a name for the group being defined.
In the `add optional description...` field, add a brief description of the group's purpose.
Then, left-click on the *Save* button:

[#access-add-group-dialog-three]
image::manage-statistics/DBclickToAddGroupThree.png[,260,align=left]

The *Add Group* panel now appears as follows:

[#add-group-panel-with-new-group]
image::manage-statistics/DBnewGroup.png[,260,align=left]

This indicates that a new group, named *Data Activity* has been defined, for displaying statistics on the `travel-sample` bucket.

[#add-a-chart]
=== Add a Chart

To add a chart to a defined group, left-click at the center of the blank chart-area displayed:

[#left-click-to-define-chart]
image::manage-statistics/DBaddNewChart.png[,80,align=left]

The *Add a Chart* dialog now appears:

[#add-chart-dialog-initial]
image::manage-statistics/DBaddAchartDialog.png[,520,align=left]

This dialog allows selection of information that will be displayed in a chart, associated with the established group.
The primary categories, which are horizontally distributed new the top of the panel, are *System*, *Index*, *Query*, *Data*, and *XDCR*.
Selection by left-clicking changes the selection of fields immediately below.
By default, the *System* checkboxes are initially displayed.

Note that the dialog also contains, towards the bottom, additional options.
*Display Data From* determines whether the chart displays data from the current node, or from the entire cluster.
*Chart Size* provides a pull-down menu, whereby the size of the displayed chart is selected.
*Group* allows selection among currently defined groups.

Left-click on *Data*.
The display now changes as follows:

[#add-chart-dialog-for-data]
image::manage-statistics/DBaddAchartDialogForData.png[,540,align=left]

This displays a button for each of the subcategories *Ops*, *Memory*, *Disk*, *VBucket*, *Disk Queues*, and *DCP Queues*.
Left-click on the *Ops* subcategory:

[#ops-tab]
image::manage-statistics/DBclickOnOpsTab.png[,120,align=left]

The *Add a Chart* dialog is now redisplayed: options for representing operations are provided as checkboxes:

[#add-chart-for-data-ops]
image::manage-statistics/DBaddAchartDialogForDataOps.png[,520,align=left]

Check the *ops per second* checkbox.
Note that when the mouse cursor is hovered over the checkbox, a tooltip appears:

[#ops-per-second-tool-tip]
image::manage-statistics/DBopsPerSecondToolTip.png[,260,align=left]

Then save the chart, by left-clicking on the * Chart* button, at the lower right of the dialog:

[#add-chart-save-button]
image::manage-statistics/DBsaveChartButton.png[,120,align=left]

The *Data Activity* group now appears as follows:

[#ops-per-second-chart]
image::manage-statistics/DBopsPerSecondChart.png[,560,align=left]

The *ops per second* chart is now displayed, with opportunity to create a further chart at its right.

[#use-chart]
=== Use and Edit a Chart

Within Couchbase Web Console, charts can be interactively used and edited.

Left-click on the icon at the upper-right of the chart:

[#chart-control-display-icon]
image::manage-statistics/DBshowHideChartControls.png[,160,align=left]

Controls for the chart are now displayed:

[#chart-controls]
image::manage-statistics/chartControls.png[,90,align=left]

To add information to the current chart, use the left icon:

[#left-click-chart-edit-icon]
image::manage-statistics/DBeditChartControl.png[,110,align=left]

This brings up the *Edit a Chart* dialog, previously used to create the current chart.
To add information to the current chart, make an appropriate selection.
For example, under the *System* subcategory, add statistics for maximum CPU:

[#add-max-cpu-statistics]
image::manage-statistics/DBeditChartToAddMaxCPU.png[,520,align=left]

After this setting has been saved, the chart features data for both of the selected statistics.
Observability can be enhanced by hovering the mouse cursor over the data: a pop-up appears, detailing information:

[#ops-cpu-chart-tool-tip]
image::manage-statistics/DBcompositeChartToolTip.png[,520,align=left]

The pop-up displays statistics that correspond to the precise linear points over which the mouse is hovered; and also displays the time of day to which the selected statistics corresponds.

Observability can also be enhanced by enlarging the size of the chart.
Within the *Add a Chart* dialog, access and modify the *Chart Size* control, then save:

[#add-chart-change-chart-size-control]
image::manage-statistics/DBchangeChartSize.png[,280,align=left]

The chart is correspondingly redisplayed:

[#larger-chart-size]
image::manage-statistics/DBlargeChart.png[,540,align=left]
