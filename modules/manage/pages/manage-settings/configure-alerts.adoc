= Email Alerts
:page-aliases: settings:configure-alerts

[abstract]
Email alerts can be dispatched automatically when a significant error occurs.

[#configuring-email-alerts]
== Configuring Email Alerts

Only Full Administrators and Cluster Administrators can configure email alerts.

The email-alert system works by sending an email directly to a configured SMTP server.
Each alert email is sent to the configured list of email recipients, to highlight specific issues and problems.
Alerts are  provided as a popup within Couchbase Web Console.

All cluster-nodes must have network access to the configured SMTP server, for the system to be fully effective.

You can define the settings using Couchbase Web Console, or using the xref:rest-api:rest-cluster-email-notifications.adoc[REST API].

[#access-email-alerts-settings]
== Access Email Alerts Settings

To access the *Email Alerts* settings screen, first, left-click on the *Settings* tab, in the navigation bar at the left-hand side of Couchbase Web Console:

image::manage-settings/settingsTab.png[,120,align=left]

This brings up the main *Settings* screen. Access the *Email Alerts* panel by means of the *Email Alerts* tab, located on the horizontal navigation bar, at the top:

image::manage-settings/emailAlertsTab.png[,140,align=left]

When the *Email Alerts* panel appears, its content is greyed out, and the user-interface components are inaccessible.
To make the components accessible, use the [.ui]*Enable email alerts* toggle, near the top of the panel:

image::manage-settings/enableEmailAlertsToggleOff.png[,160,align=left]

Switch the toggle to the right:

image::manage-settings/enableEmailAlertsToggleOn.png[,160,align=left]

The *Email Alerts* panel is now fully displayed, abd the user-interface components are accessible:

image::manage-settings/settings-alerts.png[,720,align=left]

To establish an appropriate email-alerts configuration, first, enter appropriate data into the displayed fields, using the data provided in the xref:manage:manage-settings/configure-alerts.adoc#email-settings[Email Settings] table, immediately below. Then, proceed to
xref:manage:manage-settings/configure-alerts.adoc#saving-and-testing-the-alert-configuration[Saving and Testing the Alert Configuration], further below.

== Email Settings

[#table_server,cols="1,4"]
|===
| Option | Description

| Email Server Host
| The hostname of the SMTP server that will be used to send the email.

| Port
| The TCP/IP port to be used to communicate with the SMTP server.
The default is the standard SMTP port 25.

| Username
| For email servers that require a username and password to send email, the username is used for authentication.

| Password
| For email servers that require a username and password to send email, the password is used for authentication.

| Require encryption (TLS)
| Enable Transport Layer Security (TLS) when sending the email through the designated server.

| Sender Email
| The email address identified as a source from which the email is sent.
This email address should be one that is valid as a sender address for the SMTP server that you specify.

| Recipients
| A list of the recipients of each alert message.
To specify more than one recipient, separate each address by a space, comma (,), or semicolon (;).

| Send Test Email
| Click [.ui]*Send Test Email* to send a test email to confirm the settings and configuration of the email server and recipients.
|===

[#saving-and-testing-the-alert-configuration]
== Saving and Testing the Alert Configuration

When you have entered appropriate data into the fields, proceed as follows:

. Save the configuration, by left-clicking on the *Save* button, at the bottom of the screen:
+
image::manage-settings/saveEmailAlertsConfiguration.png[,240,align=left]
+
Note that when you left-click on *Save*, the password that you typed into the *Password* field becomes invisible, and the field therefore appears blank.
This is a security measure imposed by Couchbase Server: the password remains valid, and will be used in authenticating with the email server.
+
Alternatively, left-click on *Cancel/Reset*, to remove the configuration.
. Optionally, left-click on the *Send Test Email* button, to send a test email.

== Available Alerts

The *Available Alerts* panel provides a list of all available alerts, and allows you to select, by means of interactive checkboxes, the subset of alert messages that you wish to be sent.
The listed alerts are are follows.

[#table_alerts,cols="2,3,2"]
|===
| Alert | Description | Code

| Node was auto-failed-over
| The sending node has been failed over automatically.
| `auto_failover_node`

| Maximum number of auto-failed-over nodes was reached
| The auto-failover system stops auto-failover when the maximum number of spare nodes available has been reached.
| `auto_failover_maximum_reached`

| Node wasn't auto-failed-over as other nodes are down at the same time
| Auto-failover does not take place if there is already a node down.
| `auto_failover_other_nodes_down`

| Node was not auto-failed-over as there are not enough nodes in the cluster running the same service
| You cannot support auto-failover with less than three nodes.
| `auto_failover_cluster_too_small`

| Node was not auto-failed-over as auto-failover for one or more services running on the node is disabled
| Auto-failover does not take place on a node as one or more services running on the node is disabled.
| `auto_failover_disabled`

| Node's IP address has changed unexpectedly
| The IP address of the node has changed, which may indicate a network interface, operating system, or other network or system failure.
| `ip`

| Disk space used for persistent storage has reach at least 90% of capacity
| The disk device configured for storage of persistent data is nearing full capacity.
| `disk`

| Metadata overhead is more than 50%
| The amount of data required to store the metadata information for your dataset is now greater than 50% of the available RAM.
| `overhead`

| Bucket memory on a node is entirely used for metadata
| All the available RAM on a node is being used to store the metadata for the objects stored.
This means that there is no memory available for caching values.
With no memory left for storing metadata, further requests to store data will also fail.

Only applicable to buckets configured for _value-only ejection_.
See xref:learn:buckets-memory-and-storage/memory.adoc#ejection[Ejection], for information.
| `ep_oom_errors`

| Writing data to disk for a specific bucket has failed
| The disk or device used for persisting data has failed to store persistent data for a bucket.
| `ep_item_commit_failed`

| Writing event to audit log has failed
| The audit log event writing has failed.
| `audit_dropped_events`

| Approaching full Indexer RAM warning
| The indexer RAM limit threshold is approaching warning.
| `indexer_ram_max_usage`

| Remote mutation timestamp exceeded drift threshold
| The remote mutation timestamp exceeded drift threshold warning.
| `ep_clock_cas_drift_threshold_exceeded`

| Communication issues among some nodes in the cluster
| There are some communication issues in some nodes within the cluster.
| `communication_issue`
|===
