= General
:page-aliases: settings:cluster-settings

[abstract]
_General_ settings allow configuration of the _name_, _memory quotas_ and _storage modes_ for the cluster; of _advanced settings_ for the Index and Query Services; and of _node availability_.

[#configuring-general-settings-examples-on-this-page]
== Examples on This Page

Full and Cluster Admnistrators can configure general settings by means of xref:manage:manage-settings/general-settings.adoc#configure-general-settings-with-the-ui[Couchbase Web Console], the xref:manage:manage-settings/general-settings.adoc#configure-general-settings-with-the-cli[CLI], or the xref:manage:manage-settings/general-settings.adoc#configure-general-settings-with-the-rest-api[REST API].

[#configure-general-settings-with-the-ui]
== Configure General Settings with the UI

The appearance of the *General* screen is as follows:

image::manage-settings/general-settings.png[,720,align=left]

The panels and their UI elements are described below.

[#cluster-name]
=== Cluster Name

The *Cluster Name* is the name that was given during initial setup.
This name can be changed at any time.

[#memory-quotas]
=== Memory Quotas

The per-node memory that is available to Couchbase services limited to the smallest node in the cluster.
These values can be adjusted in the UI, with the CLI or with the REST API.

* *Data Service*.
The memory allocation for the Data, per node.
The minimum allocation must be equal to or greater than the sum of all per bucket memory-allocations on the node.

* *Index Service*.
The buffer cache size of the index storage-layer.
The specified memory is pre-allocated as soon as the indexer starts up, and is shared with all indexes created on the node.
The total memory usage of the indexer process will be the buffer cache plus the size of various internal data structures and queues.

* *Search Service*.
The memory allocation for the Search Service, per node.

* *Analytics Service*.
The memory allocation for the Analytics Service, per node.

* *Eventing Service*.
The memory allocation for the Eventing Service, per node.

Note that the *Query Service* requires no memory allocation.

[#current-version]
=== Current Version

This panel provides the current version of Couchbase Server, and indicates whether updates are available.
The *Enable Software Update Notifications* checkbox is checked by default.
If the checkbox is checked, Couchbase Web Console provides notifications whenever a new version of Couchbase Server is available.
Configuration-information transferred in the update-check is anonymous, and does not include any stored key-value data.

[#node-availability]
=== Node Availability

The following checkboxes are provided:

* *Enable auto-failover after _x_ seconds for up to _y_ event*: After the timeout period set here as _x_ seconds has elapsed, an unresponsive or malfunctioning node is failed over, provided that the limit on actionable events set here as _y_ has not yet been reached.
Data replicas are promoted to active on other nodes, as appropriate.
This feature can only be used when three or more nodes are present in the cluster.
The number of seconds to elapse is configurable: the default is 120; the minimum permitted is 5; the maximum 3600.
This option is selected by default.
* *Enable auto-failover for sustained data disk read/write failures after _z_ seconds*: After the timeout period set here as _z_ seconds has elapsed, a node is failed over if it has experienced sustained data disk read/write failures.
The timeout period is configurable: the default length is 120 seconds; the minimum permitted is 5; the maximum 3600.
This checkbox can only be checked if *Enable auto-failover after* _x_ *seconds for up to* _y_ *event* has also been checked.
* *Enable auto-failover of server groups*: Server-group failover is enabled.
This checkbox (which can only be checked if *Enable auto-failover after _x_ seconds for up to _y_ event* has also been checked) should only be checked if three or more server groups have been established, and capacity is available to absorb the combined load of all potentially failed-over groups.
For information on groups, see xref:learn:clusters-and-availability/groups.adoc[Server Group Awareness].
* *Can abort rebalance*. Whether a rebalance, in progress at the time the node become unresponsive, can be aborted; in order to perform the auto-failover.
This option is selected by default.

The *Node Availability* panel also contains an *Enable auto-reprovisioning* option, for Ephemeral buckets.
Checking this checkbox ensures that if a node containing _active_ Ephemeral buckets becomes unavailable, its replicas on the specified number of other nodes are promoted to active status as appropriate, to avoid data-loss.
Note, however, that this may leave the cluster in an unbalanced state, requiring a rebalance.

[#index-storage-mode]
=== Index Storage Mode

This section provides radio buttons whereby the storage mode for indexes can be selected.
The options are xref:learn:services-and-indexes/indexes/storage-modes.adoc#memory-optimized-index-storage[Memory Optimized Index Storage], and xref:learn:services-and-indexes/indexes/storage-modes.adoc#standard-index-storage[Standard Index Storage].
See xref:learn:services-and-indexes/indexes/storage-modes.adoc[Storage Modes], for complete information on storage modes.

*Advanced Settings* for indexes are also provided:

* *Indexer Threads*.
The number of dedicated threads used by the Index Service.
The number can be increased on multi-core machines, to increase the amount of CPU available to the Indexer.
The default is 0.

* *Max Rollback Points*.
The maximum number of committed rollback points.
The default is 5.

* *Indexer Log Level*.
Adjust the logging level from least to most verbose, the options are: `Silent`, `Fatal`, `Error`, `Warn`, `Info`, `Verbose`, `Timing`, `Debug`, and `Trace`.
The default is `Info`.

[#query-settings]
=== Query Settings

Specify either *Unrestricted* or *Restricted*, to determine which URLs are permitted to be accessed by the `curl` function.
If *Unrestricted* (the default) is specified, all URLs can be accessed.
If *Restricted* is specified, the UI expands, to display configurable fields into which the URLs allowed and disallowed can be entered.

The *Query Temp Disk Path* field allows specification of the path to which temporary files are written, based on query activities.
The maximum size of the target can be specified, in megabytes.

[#saving-settings]
=== Saving Settings
To save settings, left-click on the *Save* button, at the lower right.

image::manage-settings/save-or-cancel.png[,220,align=left]

Alternatively, cancel recently entered values, and thereby reset to previous values; by left-clicking on *Cancel/Reset*.

[#configure-general-settings-with-the-cli]
== Configure General Settings with the CLI

Multiple CLI commands are used to control general settings, as described below.

[#name-and-memory-settings-via-cli]
=== Name and Memory Settings via CLI

Name and memory settings are established with the xref:cli:cbcli/couchbase-cli-setting-cluster.adoc[setting-index] command.

----
/opt/couchbase/bin/couchbase-cli setting-cluster \
--cluster 10.143.192.101:8091 \
--username Administrator \
--password password \
--cluster-ramsize 256 \
--cluster-name 10.143.192.101 \
--cluster-index-ramsize 256 \
--cluster-fts-ramsize 0 \
--cluster-eventing-ramsize 0 \
--cluster-analytics-ramsize 0
----

This establishes the cluster-name as `10.143.192.101`, the memory allocation for Data and Index Services each as 256 megabytes, and the memory allocation for each other service as zero.

If successful, the call produces the following output:

----
SUCCESS: Cluster settings modified
----

[#index-storage-settings-via-cli]
=== Index Storage Settings via CLI

Index storage can be configured with the xref:cli:cbcli/couchbase-cli-setting-index.adoc[setting-index] command.

----
/opt/couchbase/bin/couchbase-cli setting-index \
-c 10.143.192.101:8091 \
-u Administrator \
-p password \
--index-log-level info \
--index-stable-snapshot-interval 40000 \
--index-memory-snapshot-interval 150 \
--index-storage-setting default \
--index-threads 8 \
--index-max-rollback-points 10
----
This establishes the logging level as `info`, the stable snapshot interval at 40 seconds, the memory snapshot at 150 milliseconds, and the storage setting as `default` (which means _standard_, rather than _memory optimized_).
The number of threads to be used is established as 8, and the maximum number of rollback points to 10.
For information on the significance of these values see xref:cli:cbcli/couchbase-cli-setting-index.adoc[setting-index].

If successful, the call produces the following output:

----
SUCCESS: Indexer settings modified
----

[#auto-failover-settings-via-cli]
=== Auto-Failover Settings via CLI



[#configure-general-settings-with-the-rest-api]
== Configure General Settings with the REST API
