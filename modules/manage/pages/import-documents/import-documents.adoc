= Import Documents

[abstract]
Couchbase Web Console provides a graphical interface for the importing of documents, in both JSON and other formats.

[#importing-documents]
== Options for Importing Documents

Documents can be imported into Couchbase Server by means of the following:

* The *cbimport json* command-line utility, which imports JSON documents.

* The *cbimport csv* command-line utility, which imports documents that contain data in CSV and other similar formats.

* The interactive controls provided in the Couchbase Web Console *Import Documents* panel, itself located on the *Documents* screen; allowing import of both JSON and CSV-like files.

The *cbimport json* and *cbimport csv* command-line utilities should be used in preference to Couchbase Web Console, whenever high-performance importing is required; and especially when the data-set to be imported is greater in size than 100 MB.

For information on the *cbimport* suite of command-line utilities, access the *cbimport* entry, in the *CLI Reference*, in the vertical navigation bar, to the left.
The remainder of this page explains how to import documents by means of Couchbase Web Console.
Note the following prerequisites:

* Documents must be imported into a specific bucket.
Therefore, before attempting to import, ensure that an appropriate bucket exists.
If necessary, create a bucket, following the instructions provided in xref:manage:manage-buckets/create-bucket.adoc[Create a Bucket].
The following instructions assume that a bucket named `testBucket` has been created.

* Before attempting to import documents with Couchbase Web Console, ensure that the *Query Service* has been deployed on the cluster: document-import with Couchbase Web Console depends on this service.

[#access-the-import-documents-panel]
== Access the Import Documents Panel

Access the *Import Documents* panel of Couchbase Web Console, as follows:

. Left-click on the *Documents* tab, in the left-hand navigation bar:
+
image::import-documents/accessDocumentsTab.png[,120,align=left]

. When the *Documents* screen appears, select the *Import Documents* tab, on the horizontal navigation bar, near the top:
+
image::import-documents/accessImportDocumentsTab.png[,400,align=left]

The *Import Documents* panel is now displayed:

image::import-documents/importDocumentsPanel.png[,720,align=left]

The panel displays the following interactive graphical elements:

* *Select File to Import*.
A button that, when left-clicked on, displays a file-selection interface, whereby the file to be imported into Couchbase Server can be retrieved from the filesystem.

* *Parse File As*.
A pulldown menu, which allows specification of the _type_ of the file to be imported.
The menu appears as follows:
+
image::import-documents/parseFileAsMenu.png[,300,align=left]
+
The options, *CSV*, *TSV*, xref:manage:import-documents/import-documents.adoc#import-a-json-list[JSON List], and *JSON Lines*, are described in the subsections below.

* *Destination Bucket*.
A pulldown menu, which displays all buckets available on the cluster.
The selected bucket is the one into which import of the select file is to occur.
For example:
+
image::import-documents/destinationBucketSelectTestBucket.png[,320,align=left]

* *Import With Document ID*.
Two radio-buttons, which allow specification of how the _id_ of the newly imported document is to be determined.
The *UUID* option specifies that a _Universal Unique Identifier_ be generated automatically, and used as the document's id.
The *Value of Field* option specifies that the _value_ that corresponds to a particular _key_ or _field_ within the document should be used as the document's _id_: this option is only activated _after_ a document has been selected for import, such that its fields can be accessed and corresponding values determined.
+
Both of these options are demonstrated and explained further in the subsections below.

* The *cbimport* command-line display.
This display changes dynamically, to indicate the underlying command that is being prepared for execution; in correspondence with the user's ongoing addition of parameter-values into the UI.

* *File Contents*.
A read-only panel that displays the contents of the imported file.
The panel provides three display options: these are *Raw File*, which displays the unformatted file-contents; *Parse Table*, which shows the file-contents as a table, with rows and columns; and *Parse JSON*, which shows the file as formatted JSON.

* *Import Data*.
This button is to be left-clicked on, when all appropriate details of the file to be imported have been entered: data-import is then commenced.

[#import-a-json-list]
== Import a JSON List

To import one or more JSON documents, the documents must be specified in a file, and the file then specified as the target for import.
The documents can be specified in either of two ways: as a _list_, or as a series of _lines_.

To import a JSON _list_, proceed as follows.

. Save the following JSON list, as a file named `list.json`:
+
[source,json]
----
[
  {"name": "jane", "age": 22, "height": 5.2, "weight": 97},
  {"name": "jack", "age": 18, "height": 5.9, "weight": 138},
  {"name": "henry", "age": 47},
  {"name": "susan", "age": 35, "height": 5.1, "weight": 110, "birth": {"dayOfBirth": 17, "monthOfBirth": 4}},
  {"name": "david", "age": 43, "height": 5.11, "weight": 195, "birth": {"dayOfBirth": 3, "monthOfBirth": 12}}
]
----
+
The file thus contains a JSON array of six elements.
Each element is a document, containing multiple key-value pairs.

. Within the *Import Documents* panel, left-click on the *Select File to Import* button:
+
image::import-documents/selectFileToImport.png[,320,align=left]
+
The brings up the file-selection interface specific to the host operating system.
Use this to select the file targeted for import.
For example:
+
image::import-documents/fileSelectionInterface.png[,200,align=left]
+
When the file `list.json` has been selected, the *Import Documents* panel appears as follows:
+
image::import-documents/importDocumentsWithInitialContent.png[,720,align=left]
+
The filename `list.json` now appears to the right of the *Select File to Import* button.
The *Parse File As* menu displays *JSON List*, indicating that Couchbase Server has recognized the file type.
To the upper right of the *Parse File As* field, the number of records found in the file is displayed.
+
Note that, under *Import With Document ID*, the *Value of Field* option has now become activated; and displays, as placeholder text, a common _key_ it has encountered, which is `name`.
+
Note also that the *cbimport* command-line display has changed, to incorporate the information so far entered by means of the user-interface fields.
+
The *File Contents* field now shows the file contents, by default as a *Parsed Table*.

. Specify a destination bucket, using the *Destination Bucket* menu.
In this case, `testBucket` is selected:
+
image::import-documents/destinationBucketSelectTestBucket.png[,320,align=left]
+
The selection is then duly represented in the *Destination Bucket* field:
+
image::import-documents/destinationBucketAfterBucketSelection.png[,320,align=left]

. Select a form of _id_ for the documents to be imported.
The *Import With Document ID* field provides two radio buttons.
*UUID* specifies that an id is automatically generated for each document, by Couchbase Server.
*Value of Field* allows choice of a field, common to all the listed documents: the value of the field in each document will be used as that document's id.
+
Note that this option should only be used if each value is known to be unique across the listed documents, and is expected to be unique across the bucket into which the documents are imported: if the value is _not_ unique, the document currently stored in Couchbase Server is overwritten by any newly imported document that has the same id.
+
Leave the default selection, *UUID*, unchanged.
+
The *Import Documents* panel now appears as follows:
+
image::import-documents/importDocumentsWithSubsequentContent.png[,720,align=left]
+
Note that the *cbimport* command-line display now confirms `testBucket` as the bucket into which the data will be imported.
+
Optionally, the *File Contents* can now be displayed in the available, alternative forms.
To display `list.json` as unformatted JSON, left-click on the *Raw File* tab:
+
image::import-documents/rawFileTab.png[,160,align=left]
+
The file `list.json` now appears, unformatted, in the *File Contents* panel:
+
image::import-documents/fileContentsRawFile.png[,600,align=left]
+
Alternatively, left-click on the *Parsed JSON* tab:
+
image::import-documents/parsedJSONTab.png[,160,align=left]
+
The *File Contents* pane now shows a parsed version of the file `list.json`, the initial section of which appears as follows:
+
image::import-documents/fileContentsAsParsedJSON.png[,600,align=left]
