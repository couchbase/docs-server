= Manage Backup and Restore
#:page-aliases: backup-restore:backup-restore

[abstract]
Couchbase Server allows one or more buckets, and selected subsets of their data, to be backed up, restored, and archived.

[#understanding-backup-and-restore]
== Understanding Backup and Restore

The data on a Couchbase-Server cluster can be backed up, restored, and archived by means of either of the following:

* The UI provided on the *Backup* facility of Couchbase Web Console.

* The `cbbackupmgr` CLI utility.

The technology that underlies the *Backup* facility of Couchbase Web Console is in fact provided by `cbbackupmgr`: note, however, that `cbbackupmgr` provides some features that are not available from the UI.
For use of either interface, the Full Admin role must have been assigned.
On Couchbase Server 7.0 and above, both interfaces are available in both the Enterprise and the Community Edition.
Both support use of AWS S3 storage.

Note that two additional tools, `cbbackup` and `cbrestore`, continue to be available in Couchbase Server 7.0: however, both are deprecated.

[#differences-between-the-ui-and-cbbackupmgr]
=== Backup and Restore: UI versus CLI

The UI provided by the *Backup* facility of Couchbase Web Console allows backup, restore, and archiving to be configured for the local cluster; and also permits restore to be configured for a remote cluster.
By contrast, `cbbackupmgr` allows backup, restore, and archiving each to be configured either for the local or for a remote cluster: all available options are listed in xref:backup-restore:enterprise-backup-restore.adoc##version-compatibility[Version Compatibility].

Both the UI and `cbbackupmgr` allow either _full_ or _incremental_ backups to be scheduled.
Both allow incremental backups, once created, to be merged, and their data deduplicated.
Both use the same backup archive structure; and allow the contents of backups to be listed, and specific documents to be searched for.

For detailed information on how `cbbackupmgr` works (including a detailed description of incremental backup), see the xref:backup-restore:cbbackupmgr.adoc#discussion[Discussion] provided on the page for xref:backup-restore:cbbackupmgr.adoc[cbbackupmgr].
The page for xref:backup-restore:cbbackupmgr.adoc[cbbackupmgr] also provides a synopsis of the command, and a description of its basic options; and is co-located with additional pages that provide information on specific subcommands for collecting logs, compacting, merging, and more.

The remainder of the current page describes how to perform backup, restore, and archiving by means of the UI.

[#performing-backup-management-with-the-ui]
== Performing Backup Management with the UI

Proceed as follows:

. On Couchbase Web Console, left-click on the *Backup* tab, in the right-hand, vertical navigation bar:
+
image::manage-backup-restore/accessBackupTab.png[,100,align=left]
+
This brings up the *Respositories* screen of the *Backup* facility.
The initial appearance is as follows:
+
image::manage-backup-restore/backupScreenInitial.png[,720,align=left]
+
The screen features three panels, for *Active*, *Imported*, and *Archived Repositories* respectively.
Currently, all panels are blank.

. Choose to add a repository.
A _repository_ is a folder into which data will be copied as a backup.
Each defined repository should be given a unique name.
To add a repository, left-click on the *ADD REPOSITORY* tab, at the upper right of the screen:
+
image::manage-backup-restore/addRepositoryTab.png[,140,align=left]
+
This brings up the *Select plan* dialog, which initially appears as follows:
+
image::manage-backup-restore/selectPlanDialog.png[,420,align=left]

. Select a plan.
A _plan_ determines what kind of backup is to occur, affecting what data, and on what schedule.
Left-click on the control that appears at the right-hand side of the *Select plan* dialog's interactive text-field.
A pull-down menu appears, as follows:
+
image::manage-backup-restore/selectPlanDialogPullDownMenuInitial.png[,420,align=left]
+
Three options are thus provided.
The first two are *_daily_backups* and *_hourly_backups*: these are default plans that, as their names indicate, provide backups that are respectively daily and hourly.
The third option is *+ Create new plan*: select this option:
+
image::manage-backup-restore/selectPlanDialogPullDownMenuSelection.png[,140,align=left]
+
This establishes the string *+ Create new plan* within the interactive text field.
To confirm, left-click on the *Next*, button, at the lower-right of the dialog:
+
image::manage-backup-restore/selectPlanDialogPullDownMenuNext.png[,420,align=left]
+
The brings up the *Create Plan* dialog, which appears as follows:
+
image::manage-backup-restore/createPlanDialog.png[,420,align=left]
