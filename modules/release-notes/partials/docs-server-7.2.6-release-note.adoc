[#release-726]
== Release 7.2.6 (August 2024)

Couchbase Server 7.2.6 was released in August 2024.
This maintenance release contains the following fixes.

For details on new features and enhancements, see the  xref:introduction:whats-new.adoc[What's New page].


=== Fixed Issues

==== Cluster Manager
[#table-fixed-issues-726-cluster-manager, cols="10,40,40"]
|===
|Issue | Description | Resolution

| https://issues.couchbase.com/browse/MB-62413[MB-62413]
| When a username is extracted from a client certificate, no check for the user existing locally on the cluster was made.
| The cert user will only match if her username matches an existing record on the cluster.

|===

==== XDCR

[#table-fixed-issues-726-xdcr, cols="10,40,40"]
|===
|Issue | Description | Resolution

| https://issues.couchbase.com/browse/MB-62005[MB-62005]
| When none of the nodes in the remote reference DNS SRV entry is reachable, XDCR could be stuck working off of a stale list of nodes.
| Now, XDCR will be able to re-bootstrap from the top DNS SRV entry

| https://issues.couchbase.com/browse/MB-62006[MB-62006]
| Stale connectivity errors were not cleared.
| Stale connectivity errors are now cleared correctly.

| https://issues.couchbase.com/browse/MB-62097[MB-62097]
| When the pipeline is unable to start, Prometheus metrics did not capture the errors and the error state.
| The Prometheus stats will now correctly indicate the error situation as in error, as  well as the number of errors.

| https://issues.couchbase.com/browse/MB-62104[MB-62104]
| Connectivity node status map might not be synced with `cachedRefNodesList` after refresh
| When there is a rebalance (topology change) on the target cluster, XDCR will have an updated node list to keep track of the connectivity statuses of the target cluster nodes.

| https://issues.couchbase.com/browse/MB-62150[MB-62150]
| Deadlock caused by `routingUpdater` when the pipeline is stopping
| The fix addresses the edge case whereby the `routingUpdater` raises a backfill-related event that gets stuck because of a race condition with closing the replication pipeline.

| https://issues.couchbase.com/browse/MB-62384[MB-62384]
| There are situations where CAS values for documents are set incorrectly (i.e., way in the future).  +
When XDCR replications are set up, these source documents are then replicated to targets.
| When a document is considered CAS poisoned, it will be filtered out and will not be replicated. XDCR will consider the document “CAS_poisoned” and will account for it in a counter stat. +
XDCR will move on and continue to replicate other documents that are tagged with later sequence numbers to keep the pipeline moving. XDCR will not retain the document keys of the offending documents. +
A UI error/message will be shown on the console, and the
Prometheus counter stat will have a “CAS_poisoned” counter that shows a value greater than zero. This counter value is also recorded in the XDCR logs.

| https://issues.couchbase.com/browse/MB-62464[MB-62464]
| Pre-check only captures actual errors.
| Pre-check enhanced such that latency can be displayed as part of the result. A warning is displayed if the latency is too high.

| https://issues.couchbase.com/browse/MB-62409[MB-62409]
| Connection pre-check uses the `hostname` field in `remoteRef` to get the target nodes information from the target cluster.
The feature had the following limitations:

If the input for remote reference creation is a DNS SRV,
  Connection pre-check directly uses the input hostname to connect to the target.

Connection pre-check does not  auto-check if the intent of the user is to use alternate address and alternate ports.
  If such a configuration is set up for the target cluster,
  Connection pre-check always deals with non-alternate target cluster node addresses to perform connection checks.

Connection pre-check for secure connection needs `18091` (or the secure mgmt port) as input.

| The limitations have been removed:

Remote ref creation will now automatically resolve records before proceeding to connect.

 Connection pre-check can now auto-check if the intent of the user is to use alternate address and alternate ports.

Connection pre-checknow uses secure or non-secure mgmt port (8091 or 18091) irrespective of the user input (even if no port is provided).

|===


==== Query Service

[#table-fixed-issues-726-query-service, cols="10,40,40"]
|===
|Issue | Description | Resolution


| https://issues.couchbase.com/browse/MB-61564[MB-61564]
| Incorrect return code when attempting to create an index that already exists.
The system returns the error: `200: index already exists`.
| Issue resolved: the system will now return: `409: index already exists`.

| https://issues.couchbase.com/browse/MB-62042[MB-62042]
| When the input to `STR_TO_TZ` has `'Z'` as the time zone, the output uses an hour-only format.
  (e.g., `STR_TO_TZ("2024-01-01T00:00:00Z", "America/Los_Angeles") -> "2023-12-31T16:00:00-08"`) +
  In version 6 and version 7.6+ the output is `"2023-12-31T16:00:00-08:00"`.
  This affects comparisons as the strings differ.
| The `STR_TO_TZ` function will return the output in the correct format: (e.g., `2023-12-31T16:00:00-08:00`)

| https://issues.couchbase.com/browse/MB-63091[MB-63091]
| When a remote operation is performed – (e.g., obtaining completed_requests entries from remote nodes  when selecting from `system:completed_requests`), the constructed `creds` parameter isn't properly URL-encoded.
| Issue resolved; parameter is encoded correctly.

|===


==== Eventing Service

[#table-fixed-issues-726-eventing-service, cols="10,40,40"]
|===
|Issue | Description | Resolution

| https://issues.couchbase.com/browse/MB-61877[MB-61877]
| Incorrect CRC-64 encoded value for string argument
| Fixed encoding when input string contains a null terminator.

|===










