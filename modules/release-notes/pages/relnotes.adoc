= Release Notes for Couchbase Server 7.1
:description: pass:q[Couchbase Server 7.1 Introduces multiple new features.]

[#release-710]
== Release 7.1 (May 2022)

Couchbase Server 7.1 was released in May 2022.
This release contains new features and fixes to issues.

[#new-features-improvements-710]
=== New Features

This section highlights the notable new features and improvements in this release.

* Couchbase Server now permits multiple root certificates to maintained in a _trust store_ for the cluster.
See xref:learn:security/using-multiple-cas.adoc[Using Multiple Root Certificates].

* Couchbase Server now supports _PKCS #1_ and _PKCS #8_ &#8212; in each case, only for use with private keys.
See xref:learn:security/certificates.adoc#private-key-formats[Private Key Formats].

* Use of encrypted private keys is now supported for certificate management.
Registration procedures are provided for encrypted private keys associated with node-certificates.
See xref:rest-api:upload-retrieve-node-cert.adoc#json-passphrase-registration[JSON Passphrase Registration].

* _System Events_ are now provided, to record significant events on the cluster.
See xref:learn:clusters-and-availability/system-events.adoc[System Events].

* New roles are provided for the administration of _Sync Gateway_, especially in the context of Couchbase Capella.
These roles are listed at xref:learn:security/roles.adoc[Roles].

* TLS 1.3 cipher-suites can now by used by all services; and by the Cluster Manager, XDCR, and Views.
See xref:learn:security/on-the-wire-security.adoc[On the Wire Security].

* Heightened security is now provided for adding nodes to clusters.
Once  a cluster is using uploaded certificates, a node that is to be added must itself be provisioned with conformant certificates before addition can be successfully performed.
The new node is now always added over an encrypted connection.
See xref:manage:manage-security/configure-server-certificates.adoc#adding-new-nodes[Adding New Nodes].

* The scalability of indexing is enhanced by the _flattening_ of arrays.
See xref:n1ql:n1ql-language-reference/indexing-arrays.adoc#query-predicate-format[Format of Query Predicate].

* Automatic Failover can now failover several nodes concurrently and automatic failover of index services is now supported.
See xref:learn:clusters-and-availability/automatic-failover.adoc[]

* Improvements have been made to rebalancing algorithms so that active buckets, services and replicas will be spread across different server groups even when server groups are unequal.
See xref:learn:clusters-and-availability/groups.adoc[]

[#enhacements-710]
=== Enhancements

The following enhancements are provided in this release:

* XDCR checkpointing is now entirely persistent through topology-changes on the source cluster.
This provides improved performance when failover and rebalance occur on the source cluster.

* The Plasma Storage Engine has been enhanced with _per page Bloom filters_ and _in-memory compression_.
For information, see xref:learn:services-and-indexes/indexes/storage-modes.adoc#plasma-memory-enhancements[Plasma Memory Enhancements].

* Root and intermediate certificates can now be managed while node-to-node encryption is enabled.
See xref:manage:manage-nodes/apply-node-to-node-encryption.adoc#certificate-rotation-and-node-to-node-encryption[Certificate Management and Node-to-Node Encryption].

[#supported-platforms-710]
=== New Supported Platforms

This release adds support for the following platforms:

* Apple macOS v11.6 (Big Sur) for development only

* Amazon Linux (ARM)

* Debian 11.x

See xref:install:install-platforms.adoc[Supported Platforms] for the complete list of supported platforms.

[#deprecated-features-and-platforms-710]
== Deprecated Features and Platforms

=== Deprecated and Removed Platforms

The following platforms are deprecated and will be removed in a future release:

* Apple macOS v10.14 (Mojave) – removed
* Apple macOS v10.15 (Catalina) – deprecated
* CentOS 7.x – deprecated
* CentOS 8.x – removed
* Debian 9.x – removed
* Microsoft Windows Server 2016 – removed
* Microsoft Windows Server 2016 (64-bit, DataCenter Edition) – removed
* Oracle Linux 7.x – deprecated
* Red Hat Enterprise Linux (RHEL) 7.x – deprecated
* Ubuntu 18.x – deprecated

=== Deprecation of Certificate Upload API

The `POST` method and `/controller/uploadClusterCA` URI, which historically have been used to upload an appropriately configured certificate to the cluster, so that it becomes the root certificate for the cluster, are _deprecated_ in 7.1.

For security reasons, in versions 7.1 and after, by default, this method and URI can continue to be used on _localhost_ only.
However, this default setting can be changed, if required.
For details, see xref:rest-api:deprecated-security-apis/deprecated-certificate-management-apis.adoc[Deprecated Certificate Management APIs].

Note that new methods and URIs for certificate management are summarized on the page xref:rest-api:rest-certificate-management.adoc[Certificate Management API].

[#fixed-issues-710]
=== Fixed Issues

This section highlights the notable issues fixed in this release.



[#known-issues-701]
=== Known Issues

This section highlights some of the known issues in this release.

==== Query Service

[#table-known-issues-701-query-service, cols="25,66"]
|===
|Issue | Description


| https://issues.couchbase.com/browse/MB-50936[MB-50936^]
| *Summary*: Implement defs.CheckMixedModeCallback for mixed mode checks

Any attempt to execute a function with N1QL udfs replicated from a 7.1 node will fail with "no library found in worker" on a 7.0.x node.

*Workaround*: If possible, all nodes in cluster should be running under version 7.1 or higher.
|===
