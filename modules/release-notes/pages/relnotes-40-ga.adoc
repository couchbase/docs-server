= Release Notes for Couchbase Server 4.0

[abstract]
Couchbase Server 4.0 was released in October 2015.

== Supported platforms

Couchbase Server 4.0 GA is available on various Linux systems, Mac OS, and Windows.
We have added support for the following platforms: RHEL 7, Ubuntu 14.04, OS X 10.9 and 10.10, and Oracle Enterprise Linux 6.
For the complete list of platforms supported by Couchbase Server, see xref:install:install-platforms.adoc[Supported Platforms].

== Behavioral changes

The following changes in behavior are associated with Couchbase Server 4.0 GA release:

*Ports that need to be open on firewalls*

There are several new network ports that need to be open on firewalls when upgrading from an earlier version of Couchbase Server.
These ports are 8093, and ports in the range of 91xx to 99xx.
For a complete list of network ports used by Couchbase Server, see xref:install:install-ports.adoc[Network Configuration].

== Fixed issues

The following issues are fixed in Couchbase Server 4.0 GA release:

[cols="50,217"]
|===
| *Issue*
| *Description*

| http://www.couchbase.com/issues/browse/MB-15274[MB-15274^]
| The View update was stuck after a server reboot.

| http://www.couchbase.com/issues/browse/MB-15049[MB-15049^]
| With large reduce values, the number of intermediate nodes in the view index b-tree was not reduced and tree building did not finish.

| http://www.couchbase.com/issues/browse/MB-14401[MB-14401^]
| A spatial view could not be built when the input geometry was huge.

| http://www.couchbase.com/issues/browse/MB-14290[MB-14290^]
| When multiple threads tried to increment the value of a non-existing item, a ‘[.out]`NotStoredError`’ occurred instead of an atomic increment.

| http://www.couchbase.com/issues/browse/MB-14068[MB-14068^]
| Partition versions contained duplicates.

| http://www.couchbase.com/issues/browse/MB-13837[MB-13837^]
| Changing bucket parameters in REST caused the bucket password to be lost.

| http://www.couchbase.com/issues/browse/MB-13167[MB-13167^]
| Rebalance operation failed if bucket replication was in mixed DCP/TAP state.

| http://www.couchbase.com/issues/browse/MB-13160[MB-13160^]
| Views emitting only one field of a document resulted in multiple rows with different values.

| http://www.couchbase.com/issues/browse/MB-13066[MB-13066^]
| When executing a delete operation with a bad CAS value, an error was returned and memory was not freed.

| http://www.couchbase.com/issues/browse/MB-12763[MB-12763^]
| A large body length value caused moxi to restart.

| http://www.couchbase.com/issues/browse/MB-12447[MB-12447^]
| Fixed memcached memory leak when memcached uses ItemAllocate API.

| http://www.couchbase.com/issues/browse/MB-12270[MB-12270^]
| The backup operation failed with an error if one or more files were being compacted at the same time.

| http://www.couchbase.com/issues/browse/MB-12144[MB-12144^]
| The REST API did not return a fixed number of stat entries.

| http://www.couchbase.com/issues/browse/MB-11917[MB-11917^]
| One node was slow due to an issue in the Erlang R16 scheduler.
|===

== Deprecated items

The following software versions are deprecated, will be deprecated, or are unsupported.

*Platforms*

The following operating systems have been or will be deprecated.

.Deprecated operating systems
[cols="145,430,100,108"]
|===
| Operating system | Description | Deprecated version | Unsupported version

| Linux
| 32-bit operating systems (CentOS, Ubuntu, RHEL) will not be supported.
| 2.5.x
| 3.0.0

| Windows
| 32-bit operating systems will only be supported for development purposes.
32-bit production systems will not be supported.
| 2.5.x
| 3.0.0

| CentOS 5
| CentOS 5 will not be supported after Couchbase Server version 3.0.
| 3.0.x
| 3.x

| Ubuntu 10.04
| Ubuntu 10.04 will not be supported after Couchbase Server version 3.0.
| 3.0.x
| 3.x

| RHEL 5
| RHEL 5 will not be supported after Couchbase Server version 3.0.
| 3.0.x
| 3.x

| Mac OSX 10.7
| Mac OSX 10.7 will not be supported after Couchbase Server version 4.0.
| 3.0.x
| 4.x
|===

*REST API*

The following REST API URI items have been or will be deprecated.

.Deprecated REST API URIs or parameters
[cols="100,223,238,105,108"]
|===
| REST API | URI | Description | Deprecated version | Unsupported version

| Server nodes
| /pools/nodes
| URI for obtaining information about nodes in a Couchbase cluster.
To obtain information about nodes in a Couchbase cluster, use the `/pools/default/buckets/default` URI.
| 3.0.0
| 3.0.x

| XDCR
| /internalSettings
| The internal parameter `xdcrMaxConcurrentReps`, associated with XDCR replication, will not be supported.
| 3.0.0
| 4.0
|===

*CLI tools and parameters*

The following tools parameters have been deprecated, removed, or are not supported.

.Deprecated tools
[cols="59,59,20,20"]
|===
| Tool | Description | Deprecated version | Unsupported version

| cbhealthchecker
| Deprecated
| 4.0
| n/a
|===

The following CLI tools are visible but not supported by Couchbase Technical Support.
These tools are for Couchbase internal use only.

* cbbrowse_logs
* cbdump-config
* cbenable_core_dumps.sh
* couch_compact
* couch_dbdump
* couch_dbinfo
* minidump-2-core
* cbindex
* cbsasladm
* cbvbucketctl
* cbvdiff
* couch_view_file_merger
* couch_view_group_cleanup
* couch_view_group_compactor
* couch_view_index_builder
* couch_view_index_updater
* dbdiff
* dialyzer
* erl
* erlc
* escript
* forestdb_dump
* generate_cert
* gometa
* goport
* goxdcr
* gozip
* icuconfig
* projector
* sigar_port
* dump_guts
* to_erl
* typer
* vbmap
