= Classic Editor

[abstract]
A classic editor is an advanced tool where users can directly configure the index mapping. 

It is intended for users already familiar with the concepts of full-text search.

= Creating a Basic Index: _default scope/collection

This section describes creating and Index on a bucket's *_default* scope/collection.

To create an basic Search index on the _default collection, through the Classic Editor:

Access the *Couchbase Web Console* > *Search* page.

* Click the *Add Index* link in the upper right.
+
image::fts-add-index-initial.png[,,align=left]

* Enter *travel-sample-index* as the name of the Search index you are creating in the *Index Name* text-box.

** To define any index on which Full Text Search a unique name for the index in the *Index Name* field, on the upper-left. Note that only alphanumeric characters, hyphens, and underscores are allowed for index names and the first character of the name must be alphabetic. 
+
image::fts-index-name-and-bucket.png[,450,align=left]

* Select the bucket *travel-sample* from the *Bucket* pull-down menu.

** Use the pull-down menu provided for the Bucket field, on the upper-right, and select a bucket that you are allowed to acces to via the cluster's RBAC settigns.
+
image::fts-index-name.png[,450,align=left]

* Save your index, left-click on the *Create Index* button near the bottom of the screen.

** This is all you need to specify in order to create a basic index for test and development. No further configuration is required.
+
image::fts-index-name-and-bucket.png[,450,align=left]

* If you subsequently Edit your Index it should look like the following:
+
image::fts-add-index-create.png[,,align=left]

== Test the Basic _default scope/collection Index

In the *Couchbase Web Console* > *Search* page.

* Click on the index you just created (named "landmark-content-index") to expand the Index's controls.

* In the text area of the search box enter *+view +food +beach* this will search on all three keywords

* Click on the blue *Search* button. You will get documents from both type hotel and type landmark
+
image::fts-add-index-final_default_search.png[,,align=left]

NOTE: Creating default indexes as above indexes across all fields is not recommended for production environments since it creates indexes that may be unnecessarily large, and therefore insufficiently performant.

= Creating an Advanced Index: non-default scope/collection(s)

This section describes creating and Index on a bucket's non-default scope/collection on just one field.

To create an advanced Search index on the bucket: travel-sample, scope: inventory, collection: landmark, and field: content, through the Classic Editor:

Access the *Couchbase Web Console* > *Search* page.

* Click the *Add Index* link in the upper right.
+
image::fts-add-index-initial.png[,,align=left]

* Enter *landmark-content-index* as the name of the Search index you are creating in the *Index Name* text-box.

** To define any index on which Full Text Search a unique name for the index in the *Index Name* field, on the upper-left. Note that only alphanumeric characters, hyphens, and underscores are allowed for index names and the first character of the name must be alphabetic. 
+
image::fts-index-name_nondefault.png[,450,align=left]

* Select the bucket *travel-sample* from the *Bucket* pull-down menu.

** Use the pull-down menu provided for the Bucket field, on the upper-right, and select a bucket that you are allowed to acces to via the cluster's RBAC settigns.
+
image::fts-index-name-and-bucket_nondefault.png[,450,align=left]

* Select the checkbox *[X] Use non-default scope/collections* 

** if you want the index to stream and index data from a non-default scope and/or non-default collection(s) on the source bucket.
+
image::fts-select-non-default-scope-collections.png[,250,align=left]

* Use the newly visable pull-down menu provided for the *Scope* field, under the *[X] Use non-default scope/collections* checkbox, and select a bucket that you are allowed to acces to via the cluster's RBAC settigns.

** For this example select *inventory* which has multiple collections under it.
+ 
image::fts-index-scope_nondefault.png[,450,align=left]

* Under *Type Mapings", unselect the checkbox *[ ]  default | dynamic*

** This is required as this type mapping is only valid for the <bucket>._default._default which is typically used to upgrade a 6.X server form a bucket paridigm into a collections paridigm.

* Click on the button *+ Add Type Mapping*

** A new section with a *Collection* pull-down, *Analyzer* pull-down and a *[ ] only index specified fields* checkbox will appear.

** Select *landmark* from the *Collection* pull-down, note the pull down will change to a text field prefilled with *inventory.landmark*

** Check the *[X] only index specified fields* checkbox.

** Click on the blue *ok* at the right of the section to save this mapping.
+ 
image::fts-index-menu1_nondefault.png[,450,align=left]

** Hover over your newly created/saved row and click on the blue *+" button the right side of the row.

*** a context menu of "insert child mapping" (for sub-objects) and "insert child field" (for properties) will apear.  Select *insert child field*

*** another row menu will appear with the follwoing controls: "field", "type", "text", "searchable as", "analyzer" "inherit", "index", "store", "include in _all field", "include term vectors", and "docvalues".

*** Set the text box *field* to *content*, this will also update "searchable as" to *content*.

*** Check *[X]* all the boxes "store", "include in _all field", "include term vectors", and "docvalues"

*** Click on the blue *ok* at the right of the section to save this sub-form.
+ 
image::fts-index-menu1_nondefault.png[,450,align=left]

* Save your index, left-click on the *Create Index* button near the bottom of the screen.

** This is all you need to specify in order to create a more advanced index for test and development. No further configuration is required.
+
image::fts-index-create.png[,450,align=left]

* If you subsequently Edit your Index it should look like the following:
+
image::fts-add-index-final_nondefault.png[,,align=left]

NOTE: This index is an example of a potentially optimal index for use in a production environmens since it creates only on index on a needed field as such it will be more performant that the first example.

== Test the Advanced non-default Index

In the *Couchbase Web Console* > *Search* page.

* Click on the index you just created (named "landmark-content-index") to expand the Index's controls.

* In the text area of the search box enter *+view +food +beach* this will search on all three keywords

* Click on the blue *Search* button. You will get documents from only collection landmark
+
image::fts-add-index-final_nondefault_search.png[,,align=left]

= Full Text Search Screen

Once you hit the  *Create Index* button you will return to the *Couchbase Web Console* > *Search* page (note, if you tested any index just access the *Couchbase Web Console* > *Search* page again).

At this point, you are returned to the Full Text Search screen. 

A new row now appears for the index you have just created. When left-clicked on, the row opens or expands as follows:

image::fts-new-index-progress.png[,750,align=left]

== Index Build Progress

Once the new index has been built, it supports Full Text Searches performed by all available means: the Console UI, the Couchbase REST API, and the Couchbase SDK.

=== Statistic: docs processed

The percentage figure appears under the indexing progress column and represents the number of documents present in the index.  

* On an initial build this may take a while to process all the documents.  

* A mutation to an existing document will not incrment this count.

=== Statistic: indexing progress

The percentage figure appears under the indexing progress column and is incremented in correspondence with the build-progress of the index. When 100% is reached, the index build is complete. 

* However, search queries will be allowed as soon as the index is created, meaning partial results can be expected until the index build is complete.  

* If later mutations com in the percentage may actually jump around as batches of documents are processed.

* If one or more of the nodes in the cluster running data service goes down and/or are failed over, indexing progress may show a value > 100%.  

[#using-the-show-index-definition]
== Show index definition JSON

This expandable section shows the JSON document that describes the current index configuration, as created by means of the user interface.  

A checkbox *[ ]  Show curl command to modify this index definition" wrap the definition with a command line cURL sytax.  

You can copy either varient and the definitions can be used via the Search REST API.

image::fts-ishow-index-definition.png[,,align=left]

[#using-the-index-definition-preview]
== Using the Index Definition Preview

The _Index Definition Preview_ appears to the right-hand side of the *Add Index* (or a *Edit Index*) screen.

Following index-definition, the upper portion may appear as follows:

[#fts_index_definition_preview]
image::fts-index-definition-preview.png[,300,align=left]

This preview (like the *Show index definition JSON* from the main Search page) consists of the JSON document that describes the current index configuration, as created by means of the user interface.
By left-clicking on the [.ui]*copy to clipboard* tab, the definition can be saved.   

These definitions can be used via the Search REST API.

= Creating Advanced Indexes

Although the *Creating a Basic Index: _default scope/collection* above provides a simple introductoin to using Search it is not optimized nor does it expose many usefull features that the Search service supports.

The *Creating a Basic Index: non-default scope/collection(s)* starts to introduce advanced feature for optimizing and using a Search index. 

The complete range of available options for creating  Search indexes for any production environment are covered here: xref:fts-creating-indexes.adoc[Creating Indexes].

