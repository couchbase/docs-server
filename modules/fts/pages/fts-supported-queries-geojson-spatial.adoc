= Geospatial GeoJSON Queries 

[abstract]
_Geospatial_ queries return documents that contain standard basic and high level GeoJson location constructs

== GeoJSON (type geojson) [.status]#Couchbase Server 7.1.2# 

PLACEHOLDER

Convert travel-sample to GeoJSON

[source, n1ql]
----
UPDATE `travel-sample` SET geo.type = "Point", geo.coordinates = [geo.lon, geo.lat] WHERE geo is not null;
UPDATE `travel-sample` UNSET geo.lat, geo.lon WHERE geo is not null;
----

[source, json]
----
{
  "query": {
    "field": "geo",
    "geometry": {
      "shape": {
        "type": "envelope",
        "coordinates": [
          [
            1,
            50
          ],
          [
            2,
            52
          ]
        ]
      },
      "relation": "within"
    }
  },
  "size": 10,
  "from": 0
}
----
