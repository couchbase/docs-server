= LineString Query

[abstract]
A GeoJSON LineString Query against any GeoJSON type.

[.status]#Couchbase Server 7.1.2#

= QueryShape for a LineString Query

A GeoJSON query via a GeoShape of LineString to find GeoJSON types in a Search index using the 3 relations intersects, contains, and within.

== LineString `Intersects` Query

A `contains` query for linestring returns all the matched documents with shapes that intersect the linestring within the query. 

A linestring `intersection` query sample is given below.

[source, json]
----
{
  "query": {
    "field": "<<fieldName>>",
    "geometry": {
      "shape": {
        "type": "linestring",
        "coordinates": [
          [1.954764, 50.962097],
          [3.029578, 49.868547]
        ]
      },
      "relation": "intersects"
    }
  }
}
----

Intersection rules for the LineString Query with other indexed GeoJSON shapes in the document set are given below.

[#geospatial-distance-units,cols="1,2"]
|===
| Intersects (relation) +
Document Shape|{nbsp} +
LineString (GeoShape)

| Point
| Intersects when any of the line endpoints overlap the point in the document. 

| LineString
| Intersects when the linestring in the query intersects the linestring in the document.

| Polygon
| Intersects when the linestring in the query intersects any of the edges of the polygon in the document.

| MultiPoint
| Intersects when any of the line endpoints overlap any of the points in the multipoint array in the document.

| MultiLineString
| Intersects when the linestring in the query intersects any of the linestring in the multilinestring array in the document.

| MultiPolygon
| Intersects when the linestring in the query intersects any of the edges of any of the polygons in the multipolygon array in the document.

| GeometryCollection
| Matches when the query point overlaps with any of the heterogeneous (above 6) shapes in the geometrycollection array in the document.

| Circle
| Intersects when the query point lies within the area of the circular region in the document.

| Envelope
| Intersects when the query point lies within the area of the rectangular/bounded box region in the document.

|=== 

== LineString `Contains` Query

A `contains` query for linestring returns all the matched documents with shapes that contain the linestring within the query. 

A linestring `contains` query sample is given below.

[source, json]
----
{
  "query": {
    "field": "<<fieldName>>",
    "geometry": {
      "shape": {
        "type": "linestring",
        "coordinates": [
          [77.01416015625, 23.079731762449878],
          [78.134765625, 20.385825381874263]
        ]
      },
      "relation": "contains"
    }
  }
}
----

[#geospatial-distance-units,cols="1,2"]
|===
| Contains (relation) +
Document Shape|{nbsp} +
LineString (GeoShape)

| Point (document shape)
| NA.   As the  point is a non-closed shape.

| LineString
| NA.  As a linestring is a non-closed shape.

| Polygon
| Contains when both the endpoints(start, end) of the linestring in the query are within the area of the polygon in the document.

| MultiPoint
| NA.  As the multipoint is a non-closed shape.

| MultiLineString
| NA.  As the multilinestring is a non-closed shape.

| MultiPolygon
| Contains when both the endpoints(start, end) of the linestring in the query are within the area of any of the polygons in the multipolygon array in the document.

| GeometryCollection
| Matches when both the endpoints(start, end) of the linestring in query overlaps with any of the heterogeneous (above 6) shapes in the geometrycollection array in the document.

| Circle
| Contains when both the endpoints(start, end) of the linestring in the query are within the area of the circular shape in the document.

| Envelope
| Contains when both the endpoints(start, end) of the linestring in the query are within the area of the rectangle in the document.

|===

== LineString `WithIn` Query

The Within query is not supported by line geometries.
