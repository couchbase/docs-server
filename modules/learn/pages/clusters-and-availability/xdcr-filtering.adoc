= XDCR Advanced Filtering

[abstract]
XDCR Advanced Filtering allows specified subsets of documents to be replicated from the source bucket.

[#configure-xdcr-filering]
== Understanding XDCR Advanced Filtering

_XDCR filtering_ allows a document to be included in or excluded from a filtered replication, based on the document's fields and values.

Case-sensitive matches can be made on:

* _id_ and _xattrs_ values, within the document's _metadata_.

* Field-names and values, within the document's _data_, nested to any degree.

Every document on which a match is successfully made is included in the filtered replication.
Other documents are _not_ included.

Match-requirements are specified by means of:

* _Regular Expressions_.
These can be used to specify case-sensitive character-matches, and thereby determine whether a field-name or value may entitle a document to be included in a replication.
See the reference information provided in xref:xdcr-reference:xdcr-regular-expressions.adoc[XDCR Regular Expressions].

* _Filtering Expressions_.
These allow comparisons and calculations to be made on the fields and values identified by means of _regular_ expressions: based on the results, a document either is or is not included in a replication.
See the reference information provided in
xref:xdcr-reference:xdcr-filtering-expressions.adoc[XDCR Filtering Expressions].

== Advanced Filtering Options

XDCR Advanced Filtering can be used to determine which subsets of the documents in a target bucket are replicated to which destinations.
This is shown by the following diagrams.

=== No Filter Applied

When no filter is applied, all documents in the specified source bucket are replicated to the specified target bucket.
For example:

image::xdcr/filter-replication-diagram-1.png[,520,align=left]

The replication _R_ specifies as its source _Source Bucket_, on the _Source Cluster_; and specifies as its target _Target Bucket_, on the _Target Cluster_.
The replication specifies no filter.

The _Source Bucket_ contains two documents, which are `airline_10` and `airport_8835`.
Since no filter is applied, both documents are suitable for replication, and are duly replicated to the _Target Bucket_.
