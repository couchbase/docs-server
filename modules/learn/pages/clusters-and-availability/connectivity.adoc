= Connectivity
:page-aliases: understanding-couchbase:clusters-and-availability/connectivity,architecture:connectivity-architecture

[abstract]
Couchbase Server handles client-to-cluster, node-to-node, and cluster-to-cluster communications.
It also provides connectivity to a number of third-party products.

[#communication-summary]
== Communication Summary

The network-communication options supported by Couchbase Server are as follows:

* _Client-to-Cluster_.
Client applications communicate with a Couchbase Server-cluster through a set of server-defined access-points, each of which provides ports for both clear and encrypted communication.
For detailed information, see xref:install:install-ports.adoc[Network and Firewall Requirements].

* _Node-to-Node_.
Cluster-nodes intercommunicate in order to replicate data, maintain indexes, check the health of nodes, communicate changes to the cluster-configuration, and more.
See xref:clusters-and-availability/cluster-manager.adoc[Cluster Manager], for detailed information.
For information on how to encrypt the communications between nodes, see xref:learn:clusters-and-availability/node-to-node-encryption.adoc[Node-to-Node Encryption].

* _Cluster-to-Cluster_.
Couchbase Server-clusters communicate with one another by means of _Cross Data Center Replication_.
See xref:clusters-and-availability/xdcr-overview.adoc[Cross Data Center Replication (XDCR)], for detailed information.

* _Cluster-to-Connector_.
Couchbase Server-clusters communicate with third party products; by means of _connectors_.
Connectors are provided for _Elasticsearch_, _Hadoop_, _Kafka_, _Spark_, and _Talend_.
Drivers are provided for _ODBC_ and _JDBC_.
See xref:connectors:intro.adoc[Connector Guides], for detailed information.

[#connectivity-phases]
== Connectivity Phases

Client connectivity is established in three phases: _Authentication and Authorization_, _Discovery_, and _Service Connection_.

. _Authentication and Authorization_: The client authenticates with _username_ and _password_.
If these are associated with a Couchbase-Server defined _role_, itself associated with appropriate privileges on the resource access to which is being requested, the client is authorized, and access is granted.
Otherwise, access is denied.
See
xref:learn:security/authorization-overview.adoc[Authorization] for details.
. _Discovery_: A cluster-map is returned to the client.
This indicates the current cluster-topology; including the list of nodes, the data-distribution across the nodes, and the service-distribution accross the nodes.
. _Service Connection_: Once in possession of the cluster-map, the client determines the connections needed to establish and perform service-level operations.
Additional authorizations may be required, depending on the operations being attempted.
Note that in the event of topology-changes, a service connection-request may result in an exception; in which case discovery must be re-run, and operations retried with new connections.

[#managing-ip-address-families]
=== Managing IP-Address Families

Couchbase Server supports both the IPV4 and IPV6 address-families.
The Couchbase CLI allows selection of the family to be used for the cluster.
The following requirements apply:

* Each cluster-node must be named with a fully qualified domain-name (such as `nodename.clustername.com`).

* Each cluster-node must be operating in _dual stack_ mode, thereby supporting both IPV4 and IPV6 addressing.

DNS records must have been updated to resolve to the appropriate addresses.

For information on setting the address-family at server configuration, see xref:manage:manage-nodes/create-cluster.adoc[Create a Cluster].
For information on using the CLI to establish an address family and to set up node-to-node encryption, see xref:manage:manage-nodes/manage-address-families.adoc[Manage Address Families].
