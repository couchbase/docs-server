= SET TRANSACTION
:page-topic-type: concept
:page-status: Couchbase Server 7.0
:imagesdir: ../../assets/images

// Cross-references
:insert: xref:n1ql:n1ql-language-reference/insert.adoc
:upsert: xref:n1ql:n1ql-language-reference/upsert.adoc
:delete: xref:n1ql:n1ql-language-reference/delete.adoc
:update: xref:n1ql:n1ql-language-reference/update.adoc
:merge: xref:n1ql:n1ql-language-reference/merge.adoc
:select: xref:n1ql:n1ql-language-reference/selectintro.adoc
:execfunction: xref:n1ql:n1ql-language-reference/execfunction.adoc
:prepare: xref:n1ql:n1ql-language-reference/prepare.adoc
:execute: xref:n1ql:n1ql-language-reference/execute.adoc
:transactions: xref:learn:data/transactions.adoc
:txid: xref:settings:query-settings.adoc#txid

// Related links
:begin-transaction: xref:n1ql-language-reference/begin-transaction.adoc
:set-transaction: xref:n1ql-language-reference/set-transaction.adoc
:savepoint: xref:n1ql-language-reference/savepoint.adoc
:commit-transaction: xref:n1ql-language-reference/commit-transaction.adoc
:rollback-transaction: xref:n1ql-language-reference/rollback-transaction.adoc

[abstract]
The `SET TRANSACTION` statement enables you to specify settings for a transaction.

== Purpose

The `SET TRANSACTION` statement enables you to specify settings for an ACID transaction.
Refer to {transactions}[Transactions] for further information.

This statement may only be used within a transaction.

If you are using the Query Workbench or the Query REST API, you must set the {txid}[txid] query parameter to specify the transaction ID.

If you are using the cbq shell, you don't need to specify the transaction ID.
Once you have started a transaction, all eligible statements within the cbq shell session are assumed to be part of the same transaction until you rollback or commit the transaction.

You may also optionally specify settings when you start the transaction using the `BEGIN TRANSACTION` command.

NOTE: Currently, the only available transaction setting is "isolation level read committed".
This setting is enabled by default.
The `SET TRANSACTION` statement is therefore optional and may be omitted.

== Syntax

[subs="normal"]
----
set-transaction ::= SET TRANSACTION ISOLATION LEVEL READ COMMITTED
----

image::n1ql-language-reference/set-transaction.png["'SET' 'TRANSACTION' 'ISOLATION' 'LEVEL' 'READ' 'COMMITTED'"]

== Examples

[[ex-1]]
.Specify transaction settings -- cbq shell
====
.Request
[source,console]
----
cbq> \SET -txid "d81d9b4a-b758-4f98-b007-87ba262d3a51"; -- <.>
cbq> SET TRANSACTION ISOLATION LEVEL READ COMMITTED;
----

<.> The transaction ID generated when the transaction began.
====

[[ex-2]]
.Specify transaction settings -- REST API
====
.CURL request
[source,console]
----
$ curl http://localhost:8093/query/service \
-u Administrator:password \
-H 'Content-Type: application/json' \
-d '{
  "statement": "SET TRANSACTION ISOLATION LEVEL READ COMMITTED;",
  "pretty": true,
  "txid": "d81d9b4a-b758-4f98-b007-87ba262d3a51"
}'
----

This is equivalent to the request in <<ex-1>>.
====

== Related Links

* To begin a transaction, refer to {begin-transaction}[BEGIN TRANSACTION].
* To set a savepoint, refer to {savepoint}[SAVEPOINT].
* To rollback a transaction, refer to {rollback-transaction}[ROLLBACK TRANSACTION].
* To commit a transaction, refer to {commit-transaction}[COMMIT TRANSACTION].
* Blog post: https://blog.couchbase.com/transactions-n1ql-couchbase-distributed-nosql/[N1QL Transactions^].