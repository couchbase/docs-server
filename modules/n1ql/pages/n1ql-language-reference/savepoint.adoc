= SAVEPOINT
:page-topic-type: concept
:page-status: Couchbase Server 7.0
:imagesdir: ../../assets/images

// Cross-references
:transactions: xref:learn:data/transactions.adoc
:txid: xref:settings:query-settings.adoc#txid

// Related links
:begin-transaction: xref:n1ql-language-reference/begin-transaction.adoc
:set-transaction: xref:n1ql-language-reference/set-transaction.adoc
:savepoint: xref:n1ql-language-reference/savepoint.adoc
:commit-transaction: xref:n1ql-language-reference/commit-transaction.adoc
:rollback-transaction: xref:n1ql-language-reference/rollback-transaction.adoc

[abstract]
The `SAVEPOINT` statement enables you to set a savepoint within a transaction.

== Purpose

The `SAVEPOINT` statement enables you to set a savepoint within an ACID transaction.
Refer to {transactions}[Transactions] for further information.

This statement may only be used within a transaction.
You must set the {txid}[txid] query parameter to specify the transaction.

== Syntax

[subs="normal"]
----
savepoint ::= SAVEPOINT __savepointname__
----

image::n1ql-language-reference/savepoint.png["'SAVEPOINT' savepointname"]

savepointname::
An identifier specifying a name for the savepoint.

If a savepoint with the same name already exists, the existing savepoint is replaced.

== Example

.Set a savepoint
====
.CURL request
[source,console]
----
$ curl http://localhost:8093/query/service \
-u Administrator:password \
-H 'Content-Type: application/json' \
-d '{
  "statement":"SAVEPOINT s1;",
  "pretty":true,
  "txid":"d81d9b4a-b758-4f98-b007-87ba262d3a51" // <.>
}'
----

<.> The transaction ID generated when the transaction began.
====

== Related Links

* To begin a transaction, refer to {begin-transaction}[BEGIN TRANSACTION].
* To specify transaction settings, refer to {set-transaction}[SET TRANSACTION].
* To rollback a transaction, refer to {rollback-transaction}[ROLLBACK TRANSACTION].
* To commit a transaction, refer to {commit-transaction}[COMMIT TRANSACTION].