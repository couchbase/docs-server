= COMMIT TRANSACTION
:page-topic-type: concept
:page-status: Couchbase Server 7.0
:page-edition: Enterprise Edition
:imagesdir: ../../assets/images

// Cross-references
:transactions: xref:learn:data/transactions.adoc
:txid: xref:settings:query-settings.adoc#txid

// Related links
:begin-transaction: xref:n1ql-language-reference/begin-transaction.adoc
:set-transaction: xref:n1ql-language-reference/set-transaction.adoc
:savepoint: xref:n1ql-language-reference/savepoint.adoc
:commit-transaction: xref:n1ql-language-reference/commit-transaction.adoc
:rollback-transaction: xref:n1ql-language-reference/rollback-transaction.adoc

[abstract]
The `COMMIT TRANSACTION` statement enables you to commit a transaction.

== Purpose

The `COMMIT TRANSACTION` statement enables you to commit an ACID transaction.
Refer to {transactions}[Transactions] for further information.

If you are using the Query Workbench or the Query REST API, you must set the {txid}[txid] query parameter to specify the transaction ID.

If you are using the cbq shell, you don't need to specify the transaction ID.
Once you have started a transaction, all statements within the cbq shell session are assumed to be part of the same transaction until you rollback or commit the transaction.

This statement removes all savepoints within the transaction.

NOTE: If you are using the cbq shell, and a transaction fails for any reason, you must use the `ROLLBACK TRANSACTION` statement to remove the transaction context and reset the transaction ID.

== Syntax

[subs="normal"]
----
commit-transaction ::= COMMIT [ WORK | TRAN | TRANSACTION ]
----

image::n1ql-language-reference/commit-transaction.png["'COMMIT' ( 'WORK' | 'TRAN' | 'TRANSACTION' )?"]

The `WORK`, `TRAN`, and `TRANSACTION` keywords are synonyms.
These keywords are optional; you may include one of these keywords, or omit them entirely.

== Examples

[[ex-1]]
.Commit a transaction -- cbq shell
====
.Request
[source,console]
----
cbq> COMMIT TRANSACTION;
----
====

[[ex-2]]
.Commit a transaction -- REST API
====
.CURL request
[source,console]
----
$ curl http://localhost:8093/query/service \
-u Administrator:password \
-H 'Content-Type: application/json' \
-d '{
  "statement": "COMMIT TRANSACTION",
  "pretty": true,
  "txid": "d81d9b4a-b758-4f98-b007-87ba262d3a51" // <.>
}'
----

<.> The transaction ID generated when the transaction began.
====

== Related Links

* To begin a transaction, refer to {begin-transaction}[BEGIN TRANSACTION].
* To specify transaction settings, refer to {set-transaction}[SET TRANSACTION].
* To set a savepoint, refer to {savepoint}[SAVEPOINT].
* To rollback a transaction, refer to {rollback-transaction}[ROLLBACK TRANSACTION].
* Blog post: https://blog.couchbase.com/transactions-n1ql-couchbase-distributed-nosql/[N1QL Transactions^].