= Conditional Functions for Unknowns
:page-topic-type: concept

Conditional functions evaluate expressions to determine if the values and formulas meet the specified condition.

[[coalesce,COALESCE()]]
== COALESCE(`expression1`, `expression2`, \...)

Alias for <<if_missing_or_null>>.

[[if_missing,IFMISSING()]]
== IFMISSING(`expression1`, `expression2`, \...)

=== Arguments

expression1, expression2, \...:: [At least 2 are required] Any valid expressions.

=== Return Value
Returns the first non-MISSING value.
Returns NULL if all values are MISSING.

=== Example
====
[source,n1ql]
----
SELECT IFMISSING(null, missing, "abc", 123) AS Mix, <1>
       IFMISSING(null, null, null) AS AllNull, <2>
       IFMISSING(missing, missing, missing) AS AllMissing;
----

.Results
[source,json]
----
[
  {
    "AllMissing": null,
    "AllNull": null, <2>
    "Mix": null <1>
  }
]
----
====

<1> The first non-MISSING value is NULL, so this function returns NULL.
<2> The first non-MISSING value is NULL, so this function returns NULL.

[[if_missing_or_null,IFMISSINGORNULL()]]
== IFMISSINGORNULL(`expression1`, `expression2`, \...)

This function has an alias <<coalesce>>.

=== Arguments

expression1, expression2, \...:: [At least 2 are required] Any valid expressions.

=== Return Value
Returns first non-NULL, non-MISSING value.
Returns NULL if all values are MISSING or NULL.

=== Example
====
[source,n1ql]
----
SELECT IFMISSINGORNULL(null, missing, "abc", 123) AS Mix,
       IFMISSINGORNULL(null, null, null) AS AllNull,
       IFMISSINGORNULL(missing, missing, missing) AS AllMissing;
----

.Results
[source,json]
----
[
  {
    "AllMissing": null,
    "AllNull": null,
    "Mix": "abc"
  }
]
----
====

[[if_null,IFNULL()]]
== IFNULL(`expression1`, `expression2`, \...)

=== Arguments

expression1, expression2, \...:: [At least 2 are required] Any valid expressions.

=== Return Value
Returns first non-NULL value.
Returns NULL if all values are NULL.

=== Example
====
[source,n1ql]
----
SELECT IFNULL(null, missing, "abc", 123) AS Mix, <1>
       IFNULL(null, null, null) AS AllNull,
       IFNULL(missing, missing, missing) AS AllMissing; <2>
----

.Results
[source,json]
----
[
  {
    "AllNull": null
  }
]
----
====

<1> The first non-NULL value is MISSING, so this function returns MISSING.
<2> The first non-NULL value is MISSING, so this function returns MISSING.

[[missing_if,MISSINGIF()]]
== MISSINGIF(`expression1`, `expression2`)

=== Arguments

expression1, expression2, \...:: [Exactly 2 are required] Any valid expressions.

=== Return Value
Returns MISSING if `expression1` = `expression2`, otherwise returns `expression1`.
Returns MISSING if either input is MISSING or if both inputs are MISSING.
Returns NULL if either input is NULL or if both inputs are NULL.

=== Example
====
[source,n1ql]
----
SELECT MISSINGIF("abc", 123) AS Different,
       MISSINGIF("abc", "abc") AS Same;
----

.Results
[source,json]
----
[
  {
    "Different": "abc"
  }
]
----
====

[[null_if,NULLIF()]]
== NULLIF(`expression1`, `expression2`)

=== Arguments

expression1, expression2, \...:: [Exactly 2 are required] Any valid expressions.

=== Return Value
Returns NULL if `expression1` = `expression2`, otherwise returns `expression1`.
Returns MISSING if either input is MISSING or if both inputs are MISSING.
Returns NULL if either input is NULL or if both inputs are NULL.

=== Example
====
[source,n1ql]
----
SELECT NULLIF("abc", 123) AS Different,
       NULLIF("abc", "abc") AS Same;
----

.Results
[source,json]
----
[
  {
    "Different": "abc",
    "Same": null
  }
]
----
====

[[nvl,NVL()]]
== NVL(`expression1`, `expression2`)

=== Arguments

expression1, expression2, \...:: [Exactly 2 are required] Any valid expressions.

=== Return Value
Returns `expression1` if `expression1` is not MISSING or NULL.
Returns `expression2` if `expression1` is MISSING or NULL.

=== Example
====
[source,n1ql]
----
SELECT a.name as Name, NVL(a.iata, "n/a") as IATA
FROM `travel-sample` a
WHERE a.type="airline"
LIMIT 5;
----

.Results
[source,json]
----
[
  {
    "IATA": "Q5",
    "Name": "40-Mile Air"
  },
  {
    "IATA": "TQ",
    "Name": "Texas Wings"
  },
  {
    "IATA": "A1",
    "Name": "Atifly"
  },
  {
    "IATA": "n/a",
    "Name": "Jc royal.britannica"
  },
  {
    "IATA": "ZQ",
    "Name": "Locair"
  }
]
----
====

[[nvl2,NVL2()]]
== NVL2(`expression`, `value1`, `value2`)

=== Arguments

=== Arguments

expression:: [Required] Any valid expression.
value1, value2, \...:: [Exactly 2 are required] Any values.

=== Return Value
Returns `value1` if `expression` is not MISSING or NULL.
Returns `value2` if `expression` is MISSING or NULL.

=== Example
====
[source,n1ql]
----
SELECT h.name as Name, NVL2(h.directions, "Yes", "No") as DirectionsAvailable
FROM `travel-sample` h
WHERE h.type="hotel"
LIMIT 5;
----

.Results
[source,json]
----
[
  {
    "DirectionsAvailable": "No",
    "Name": "Medway Youth Hostel"
  },
  {
    "DirectionsAvailable": "No",
    "Name": "The Balmoral Guesthouse"
  },
  {
    "DirectionsAvailable": "Yes",
    "Name": "The Robins"
  },
  {
    "DirectionsAvailable": "Yes",
    "Name": "Le Clos Fleuri"
  },
  {
    "DirectionsAvailable": "Yes",
    "Name": "Glasgow Grand Central"
  }
]
----
====
