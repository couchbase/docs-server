[#topic_ggq_hfy_p4]
= Using hostnames

[abstract]
Each Couchbase Server's instance can have its hostname.

When you first install Couchbase Server, you can access it using a default IP address.
However, in some cases you might want to provide a hostname for each instance of a server.
Each hostname you provide must be a valid one and will ultimately resolve to a valid IP Address.
If you restart a node, it will use the hostname once again.
If you failover or remove a node from a cluster, the node needs to be configured with the hostname once again.

There are several ways you can provide hostnames:

* When installing a Couchbase Server on a machine.
* When adding a node to an existing cluster for an online upgrade.
* Using a REST API call.

Couchbase Server stores the hostnames in a configuration file on the disk.

== Provide hostname on initial setup

The provided hostname survives node restart.

[#image_cwm_4rd_dt]
image::admin/picts/cluster-setup-host.png[,720,align=left]

== Provide hostname while adding a node

Add a new node to a cluster by providing either a hostname or IP address under *Add Server > Server IP Address*.

[#image_yxs_y3f_zs]
image::upgrade-online-02.png[,500,align=left]

== Provide hostname via REST API

Provide the hostname before adding a node to a cluster.
If the node is already part of a cluster, Couchbase Server rejects the request and returns an error:

----
error 400 reason: unknown ["Renaming is disallowed for nodes that are already part of a cluster"]
----

----
curl -v -X POST -u Administrator:asdasd \
http://127.0.0.1:8091/node/controller/rename -d hostname=shz.localdomain
----

== Hostname errors

Provide the hostname and port for the node and administrative credentials for the cluster.
The value you provide for `hostname` must be a valid hostname for the node.
Possible errors that can occur:

* [.output]`Could not resolve the host name.
The host name you provide as a parameter does not resolve to a IP address.`
* [.output]`Could not listen.
The host name resolves to an IP address, but no network connection exists for the address.`
* [.output]`Could not rename the node because name was fixed at server start-up.`
* [.output]`Could not save address after rename.`
* [.output]`Requested name host name is not allowed.
Invalid host name provided.`
* [.output]`Renaming is disallowed for nodes that are already part of a cluster.`
