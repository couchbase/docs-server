= Installing Couchbase Server on Red Hat Enterprise and CentOS
:tabs:

[abstract]
Install Couchbase Server on Red Hat Enterprise (RHEL) and CentOS.
Root and non-root installations are supported.

Use the instructions on this page to install Couchbase Server on RHEL and CentOS platforms using the officially-supported `.rpm` packages provided by Couchbase.
The instructions support both Enterprise and Community editions.

[IMPORTANT]
====
The installation procedures assume that you're working from a clean system and that you've xref:install-uninstalling.adoc[uninstalled] any previous installations of Couchbase Server.

If you're upgrading an existing installation of Couchbase Server, refer to xref:upgrade.adoc[Upgrading Couchbase Server].
====

== Before You Install

Couchbase Server works out-of-the-box on most RHEL and CentOS configurations.
However, you should review the following material before installing, especially if you're deploying Couchbase into production:

* Ensure that you've met the xref:plan-for-production.adoc[minimum system requirements] and that your operating system version is xref:install-platforms.adoc[supported].
* Follow the xref:install-production-deployment.adoc[deployment guidelines] to ensure that your systems and environment are properly sized and configured.

=== Setting Max Process Limits

On RHEL and CentOS systems, it's recommended that you increase the maximum process limits for Couchbase.

To set the process limits, create a `.conf` file in the `/etc/security/limits.d` directory (such as `91-couchbase.conf`), and add the following values:

[source,console]
----
couchbase soft nproc 4096
couchbase hard nproc 16384
----

== Basic Installation

You must be logged in as root (superuser) or use `sudo` to run the installation commands.

=== Install Using `yum`

The Red Hat package manager (`yum`) provides the simplest and most comprehensive way to install Couchbase on RHEL and CentOS platforms.
This method involves downloading and installing a small meta package from Couchbase, which `yum` can then use to automatically download and install Couchbase Server and all of its dependencies.

. Download and install the `.rpm` meta package.
+
[source,console]
----
curl -O https://packages.couchbase.com/releases/couchbase-release/couchbase-release-1.0-6-amd64.rpm
----
+
[source,console]
----
sudo rpm -i ./couchbase-release-1.0-6-amd64.rpm
----
+
The meta package installs the necessary information for `yum` to retrieve all of the necessary packages, and also imports the necessary Couchbase public signing keys.

. Reload the local package database.
+
[source,console]
----
sudo yum update
----

. Install Couchbase Server.
+
[{tabs}] 
==== 
Enterprise:: 
+ 
--
Install the latest release of Couchbase Server Enterprise::
+
[source,console]
----
sudo yum install couchbase-server
----
Install a specific release of Couchbase Server Enterprise::
+
. List the available releases.
+
[source,console]
----
yum list -a couchbase-server
----
+
An example listing might be: `couchbase-server/xenial *6.0.0-1693-1* amd64`.
+
. Specify a release to install it.
+
[source,console]
----
sudo yum install couchbase-server=<version-string>
----
+
...where `<version-string>` is the full version string of the release.
+
Using the example listing from the previous step, the version string would be `*6.0.0-1693-1*`, and thus the installation command would be: `sudo yum install couchbase-server=6.0.0-1693-1`
--

Community::
+
-- 
Install the latest release of Couchbase Server Community::
+
[source,console]
----
sudo yum install couchbase-server-community
----
Install a specific release of Couchbase Server Community::
+
. List the available releases.
+
[source,console]
----
yum list -a couchbase-server-community
----
+
An example listing might be: `couchbase-server-community/xenial *6.0.0-1693-1* amd64`.
+
. Specify a release to install it.
+
[source,console]
----
sudo yum install couchbase-server-community=<version-string>
----
+
...where `<version-string>` is the full version string of the release.
+
Using the example listing from the previous step, the version string would be `*6.0.0-1693-1*`, and thus the installation command would be: `sudo yum install couchbase-server-community=6.0.0-1693-1`
--
====
+
The `yum` command automatically downloads and installs the latest version of Couchbase Server, along with all of its dependencies.
+
Once installation is complete, Couchbase Server will start automatically (and will continue to start automatically at run levels 2, 3, 4, and 5, and explicitly shut down at run levels 0, 1, and 6).
You can use the `systemctl` command (`service` on older operating systems) to start and stop the Couchbase Server service, as well as check the current status.
Refer to xref:startup-shutdown.adoc[Couchbase Server Startup and Shutdown] for more information.
+
. Open a web browser and access the Couchbase Server Web Console to xref:testing.adoc[verify] that the installation was successful and the node is available.

=== Install Using `.rpm` Package

Install Couchbase Server on RHEL and CentOS using the `yum` command-line tool with the full `.rpm` package that you downloaded from Couchbase.

. Download the appropriate package for your operating system from the Couchbase https://www.couchbase.com/downloads[downloads page^].

. Reload the local package database.
+
[source,console]
----
sudo yum update
----

. Install Couchbase Server.
+
[source,console]
----
sudo yum install ./couchbase-server-*.rpm
----
+
...where `*` is the edition and version of the downloaded package.
+
If `yum` detects that any dependencies are required on your system, it will download and install them automatically.
+
Once installation is complete, Couchbase Server will start automatically (and will continue to start automatically at run levels 2, 3, 4, and 5, and explicitly shut down at run levels 0, 1, and 6).
You can use the `systemctl` command (`service` on older operating systems) to start and stop the Couchbase Server service, as well as check the current status.
Refer to xref:startup-shutdown.adoc[Couchbase Server Startup and Shutdown] for more information.

. Open a web browser and access the Couchbase Server Web Console to xref:testing.adoc[verify] that the installation was successful and the node is available.

[#rh-nonroot-nonsudo-]
== Installing as non-root, non-sudo

Installing on RHEL as a non-root, non-sudo user on a single machine.

// Removing the note as this has been verified by QE to be production ready
// <note type="important">This installation method is intended only for development purposes and is
// not supported in production.</note>

A non-sudo, non-root installation still runs Couchbase Server and all Couchbase command-line tools.

. After downloading the Couchbase Server RPM, go to the directory where it is located and extract it:
+
[source,bash]
----
rpm2cpio couchbase-server-enterprise_version.rpm | cpio --extract --make-directories --no-absolute-filenames
----
+
In the directory where the files were extracted, the `opt` and `etc` sub-directories are available.

. After you extract the Couchbase Server installation files, go to the sub-directory:
+
[source,bash]
----
cd opt/couchbase
----

. Run the following script to relocate the Couchbase Server installation to the present working directory (PWD):
+
[source,bash]
----
./bin/install/reloc.sh `pwd`
----
+
This enables you to continue the installation as a non-root, non-sudo user.

. To run the server, use
+
[source,bash]
----
./bin/couchbase-server \-- -noinput -detached
----

. To stop the server, use
+
[source,bash]
----
./bin/couchbase-server -k
----



