= Rolling Upgrade with Multiple Versions

[abstract]
A rolling upgrade through multiple Couchbase Server software versions combines the selected upgrade strategy with reaching the desired Couchbase Server version.

Use one of the following strategies:

Full swap rebalance upgrade:: Swap most, if not all new nodes in for old with xref:cli:cbcli/rebalance.adoc[rebalance] command.

Rolling swap rebalance upgrade:: Swap one node in or one node out at a time.

Standard rolling upgrade:: For this upgrade strategy, your cluster must have sufficient capacity.

For example, an upgrade from Couchbase Server version 2.2.0 to version 4.x using the rolling swap rebalance upgrade strategy typically involves the following steps:

. Back up cluster data with the xref:cli:cbbackup-tool.adoc[cbbackup tool].
. Install Couchbase Server version 2.5.2 on as many new nodes as you have on hand to swap in for the existing 2.2.0 cluster nodes.
. Add the upgraded nodes to the cluster and select the same number of existing nodes to remove.
. Initiate a rebalance operation to move existing data from nodes that will be removed to the nodes that are being added.
. When the rebalance operation completes, ensure that the cluster is functioning as expected with version 2.5.2.
. Perform steps 1 through 5 again, but this time upgrade nodes to version 4.x.
. Verify that the cluster is operating as expected on version 4.x.

You should carefully plan upgrades spanning multiple versions.
Be sure to read the release notes and details about significant changes in each newer version before attempting the upgrade.

See the http://blog.couchbase.com/Couchbase-rolling-upgrades[Rolling Upgrades^] blog post for more information and examples.
