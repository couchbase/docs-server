[#topic_rfg_qjt_xs]
= Azure Marketplace

[abstract]
Make sure that you have the prerequisites for installing Microsoft Azure.

Use the pre-installation checklist to ensure that you have all requirements:

Minimum hardware recommendations::
* 2 cores and 4 GB for development.
* 4 cores and 16 GB for production.
* For development workloads, choose instance types: D2, D11, A3, A5 or larger.
* For production workloads, choose instance types: D3, D12 or A6 or larger.

Configuration of the Azure network::
* Note that a virtual network is the most efficient way.
* Configure a Virtual Network for nodes and applications per DC/Region.
* Set up Vnet-to-Vnet connection between DCs/Regions.
* Note that PrivateIPs are faster to route than public IPs.

Configuration of Availability Sets and Server Groups for full protection::
* Ensure Protection against upgrades and rack failures.
* Configure availability set per VNet.
* Ensure that all nodes are in the same availability set.
* Ensure that all nodes are in separate groups in the Couchbase Server cluster.

Configuration of Couchbase Server::
* Use static IPs with nodes.
* Set `AzureStaticVNetIP` in Powershell or check the box in the new portal.
* Use a PrivateIP for server communication.
* Register the node PrivateIPs (ex: 10.0.x.x) with the Couchbase Web Console.
* Enable remote administration.
* Use a jump box for the front admin access, or open 18901 for the encrypted admin access (only with Couchbase Server 3.0).
* Map externally to another random port for security.
* ACL the #18091 endpoint.
* Couchbase Web Console and CLI use #18091, which is SSL encrypted.
* ACL #18091 for added security.
No need to open any other port
* Encrypt cross DC/Region traffic with SSL.

Configuration of the Couchbase Server application::
* Ensure that applications are deployed to the same Vnet.
* Use privateIPs (10.0.x.x) for websites, VM applications or cloud services.
 ** SSL based client-server communications
 ** SSL based view access: https://couchbase_server:18092/â€¦

Configuration of storage::
* Mount data disks and stripe across with RAID 0.
* Do not use ephemeral drive, which will be reset under node restart.
* Do not use OS drive  because it is limited in size.
* Do not use ReadWrite caching for Couchbase Server data drives, since it writes through to Azure Storage.
